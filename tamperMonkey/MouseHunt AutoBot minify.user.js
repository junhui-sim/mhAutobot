// ==UserScript==
// @name        MouseHunt AutoBot REVAMP
// @author      NobodyRandom
// @version    	1.4.417ma
// @description An advance user script to automate sounding the hunter horn in MouseHunt application with the newest version supported and many other features and fixes. REVAMPED VERSION of ORIGINAL by Ooi
// @require		https://greasyfork.org/scripts/6094-mousehunt-autobot-additional-thing/code/MouseHunt%20AutoBot%20Additional%20thing.js?version=31746
// @namespace   https://greasyfork.org/users/6398
// @updateURL	https://greasyfork.org/scripts/6092-mousehunt-autobot/code/MouseHunt%20AutoBot.user.js
// @downloadURL	https://greasyfork.org/scripts/6092-mousehunt-autobot/code/MouseHunt%20AutoBot.user.js
// @license 	GNU GPL v2.0
// @include		http://mousehuntgame.com/*
// @include		https://mousehuntgame.com/*
// @include		http://www.mousehuntgame.com/*
// @include		https://www.mousehuntgame.com/*
// @include		http://apps.facebook.com/mousehunt/*
// @include		https://apps.facebook.com/mousehunt/*
// @include		http://hi5.com/friend/games/MouseHunt*
// @include		http://mousehunt.hi5.hitgrab.com/*
// ==/UserScript==
function exeScript(){if(60==trapCheckTimeDiff?trapCheckTimeDiff=0:(0>trapCheckTimeDiff||trapCheckTimeDiff>60)&&(enableTrapCheck=!1),showTimerInTitle)if(-1!=window.location.href.indexOf("apps.facebook.com/mousehunt/")){var e=document.getElementById("pagelet_canvas_content");if(e){var t=document.createElement("div");t.setAttribute("id","breakFrameDivElement"),t.innerHTML="Timer cannot show on title page. You can <a href='http://www.mousehuntgame.com/canvas/'>run MouseHunt without iFrame (Facebook)</a> to enable timer on title page",e.parentNode.insertBefore(t,e)}e=void 0}else if(-1!=window.location.href.indexOf("hi5.com/friend/games/MouseHunt")){var e=document.getElementById("apps-canvas-body");if(e){var t=document.createElement("div");t.setAttribute("id","breakFrameDivElement"),t.innerHTML="Timer cannot show on title page. You can <a href='http://mousehunt.hi5.hitgrab.com/'>run MouseHunt without iFrame (Hi5)</a> to enable timer on title page",e.parentNode.insertBefore(t,e)}e=void 0}if(-1!=window.location.href.indexOf("mousehuntgame.com/canvas/"))fbPlatform=!0;else if(-1!=window.location.href.indexOf("mousehuntgame.com")){var n=getCookie("switch_to");null!=n&&"mobile"==n?mhMobilePlatform=!0:mhPlatform=!0,n=void 0}else-1!=window.location.href.indexOf("mousehunt.hi5.hitgrab.com")&&(hiFivePlatform=!0);secureConnection=-1!=window.location.href.indexOf("https://")?!0:!1,fbPlatform?"http://www.mousehuntgame.com/canvas/"==window.location.href||"http://www.mousehuntgame.com/canvas/#"==window.location.href||"https://www.mousehuntgame.com/canvas/"==window.location.href||"https://www.mousehuntgame.com/canvas/#"==window.location.href||-1!=window.location.href.indexOf("mousehuntgame.com/canvas/index.php")||-1!=window.location.href.indexOf("mousehuntgame.com/canvas/turn.php")||-1!=window.location.href.indexOf("mousehuntgame.com/canvas/?")?(loadPreferenceSettingFromStorage(),!checkIntroContainer()&&retrieveDataFirst()?(embedTimer(!0),embedScript(),action()):(document.title="Fail to retrieve data from page. Reloading in "+timeformat(errorReloadTime),window.setTimeout(function(){reloadPage(!1)},1e3*errorReloadTime))):embedTimer(!1):mhPlatform?"http://www.mousehuntgame.com/"==window.location.href||"http://www.mousehuntgame.com/#"==window.location.href||"http://www.mousehuntgame.com/?switch_to=standard"==window.location.href||"https://www.mousehuntgame.com/"==window.location.href||"https://www.mousehuntgame.com/#"==window.location.href||"https://www.mousehuntgame.com/?switch_to=standard"==window.location.href||-1!=window.location.href.indexOf("mousehuntgame.com/turn.php")||-1!=window.location.href.indexOf("mousehuntgame.com/index.php")?(loadPreferenceSettingFromStorage(),!checkIntroContainer()&&retrieveDataFirst()?(embedTimer(!0),embedScript(),action()):(document.title="Fail to retrieve data from page. Reloading in "+timeformat(errorReloadTime),window.setTimeout(function(){reloadPage(!1)},1e3*errorReloadTime))):embedTimer(!1):mhMobilePlatform?(loadPreferenceSettingFromStorage(),embedTimer(!1)):hiFivePlatform&&("http://mousehunt.hi5.hitgrab.com/#"==window.location.href||-1!=window.location.href.indexOf("http://mousehunt.hi5.hitgrab.com/?")||"http://mousehunt.hi5.hitgrab.com/"==window.location.href||-1!=window.location.href.indexOf("http://mousehunt.hi5.hitgrab.com/turn.php")||-1!=window.location.href.indexOf("http://mousehunt.hi5.hitgrab.com/index.php")?(loadPreferenceSettingFromStorage(),!checkIntroContainer()&&retrieveDataFirst()?(embedTimer(!0),embedScript(),action()):(document.title="Fail to retrieve data from page. Reloading in "+timeformat(errorReloadTime),window.setTimeout(function(){reloadPage(!1)},1e3*errorReloadTime))):embedTimer(!1))}function checkIntroContainer(){var e=!1,t=document.getElementById("introContainer");t?(t=void 0,e=!0):e=!1;try{return e}finally{e=void 0}}function retrieveDataFirst(){var e=!1,t=!1,n=!1,i=!1,o=document.getElementsByTagName("script");if(o){var a;for(a=0;a<o.length;++a){var r=o[a].innerHTML,l=r.indexOf("next_activeturn_seconds");if(l>=0){var d=900;l+=25;var u=r.indexOf(",",l),s=r.substring(l,u);if(d=parseInt(s),hornTimeDelay=hornTimeDelayMin+Math.round(Math.random()*(hornTimeDelayMax-hornTimeDelayMin)),aggressiveMode)hornTime=d,lastDateRecorded=void 0,lastDateRecorded=new Date;else{var c=Math.ceil(.1*d),m=r.indexOf("hud.timer_interval");if(m>=0){m+=21;var h=r.indexOf(";",m),p=r.substring(m,h),g=parseInt(p);1==g&&(c=2),m=void 0,h=void 0,p=void 0,g=void 0}hornTime=d+hornTimeDelay,lastDateRecorded=void 0,lastDateRecorded=new Date,c=void 0}e=!0,l=void 0,u=void 0,s=void 0,d=void 0}var f=r.indexOf("has_puzzle");if(f>=0){f+=12;var w=r.indexOf(",",f),T=r.substring(f,w);isKingReward="false"==T?!1:!0,t=!0,f=void 0,w=void 0,T=void 0}var y=r.indexOf("bait_quantity");if(y>=0){y+=15;var v=r.indexOf(",",y),b=r.substring(y,v);baitQuantity=parseInt(b),n=!0,y=void 0,v=void 0,b=void 0}var k,I;if(k=r.indexOf('location":"'),k>=0){k+=11,I=r.indexOf('"',k);var S=r.substring(k,I);currentLocation=S,k=void 0,I=void 0,S=void 0}r=void 0}a=void 0}if(o=void 0,e&&t&&n){if(enableTrapCheck){var M=new Date;checkTimeDelay=checkTimeDelayMin+Math.round(Math.random()*(checkTimeDelayMax-checkTimeDelayMin)),checkTime=M.getMinutes()>=trapCheckTimeDiff?3600+60*trapCheckTimeDiff-(60*M.getMinutes()+M.getSeconds()):60*trapCheckTimeDiff-(60*M.getMinutes()+M.getSeconds()),checkTime+=checkTimeDelay,M=void 0}var R=getStorage("huntLocation");void 0==R||null==R?(huntLocation=currentLocation,setStorage("huntLocation",currentLocation)):(huntLocation=R,setStorage("huntLocation",huntLocation)),R=void 0;var x=getStorage("lastKingRewardDate");if(void 0==x||null==x)lastKingRewardSumTime=-1;else{var C=new Date(x);lastKingRewardSumTime=parseInt((new Date-C)/1e3),C=void 0}x=void 0,i=!0}else i=!1;e=void 0,t=void 0,n=void 0;try{return i}finally{i=void 0}}function retrieveData(){var e=browserDetection();if("firefox"==e?(nextActiveTime=unsafeWindow.user.next_activeturn_seconds,isKingReward=unsafeWindow.user.has_puzzle,baitQuantity=unsafeWindow.user.bait_quantity,currentLocation=unsafeWindow.user.location):"opera"==e?(nextActiveTime=user.next_activeturn_seconds,isKingReward=user.has_puzzle,baitQuantity=user.bait_quantity,currentLocation=user.location):"chrome"==e?(nextActiveTime=parseInt(getPageVariableForChrome("user.next_activeturn_seconds")),isKingReward="false"==getPageVariableForChrome("user.has_puzzle").toString()?!1:!0,baitQuantity=parseInt(getPageVariableForChrome("user.bait_quantity")),currentLocation=getPageVariableForChrome("user.location")):window.setTimeout(function(){reloadWithMessage("Browser not supported. Reloading...",!1)},6e4),e=void 0,""==nextActiveTime||isNaN(nextActiveTime))window.setTimeout(function(){reloadWithMessage("Fail to retrieve data. Reloading...",!1)},5e3);else if(hornTimeDelay=hornTimeDelayMin+Math.round(Math.random()*(hornTimeDelayMax-hornTimeDelayMin)),aggressiveMode)hornTime=nextActiveTime,lastDateRecorded=void 0,lastDateRecorded=new Date;else{var t=Math.ceil(.1*nextActiveTime);""==timerInterval||isNaN(timerInterval)||1!=timerInterval||(t=2),hornTime=nextActiveTime+hornTimeDelay,lastDateRecorded=void 0,lastDateRecorded=new Date,t=void 0}if(enableTrapCheck){var n=new Date;checkTimeDelay=checkTimeDelayMin+Math.round(Math.random()*(checkTimeDelayMax-checkTimeDelayMin)),checkTime=n.getMinutes()>=trapCheckTimeDiff?3600+60*trapCheckTimeDiff-(60*n.getMinutes()+n.getSeconds()):60*trapCheckTimeDiff-(60*n.getMinutes()+n.getSeconds()),checkTime+=checkTimeDelay,n=void 0}}function getPageVariable(e,t){"user.next_activeturn_seconds"==e?nextActiveTime=parseInt(t):"hud.timer_interval"==e?timerInterval=parseInt(t):"user.has_puzzle"==e?isKingReward=1==t.toString()?!0:!1:"user.bait_quantity"==e?baitQuantity=parseInt(t):"user.location"==e&&(currentLocation=t.toString()),e=void 0,t=void 0}function checkJournalDate(){var e=!1,t=document.getElementsByClassName("journaldate");if(t){var n=t[0].innerHTML.toString(),i=n.indexOf(":",0),o=n.indexOf(" ",i);if(i>=1){var a=n.substring(0,i),r=n.substring(i+1,2),l=n.substring(o+1,2),d=new Date,u=new Date;"am"==l?u.setHours(parseInt(a),parseInt(r),0,0):u.setHours(parseInt(a)+12,parseInt(r),0,0),parseInt(d-u)/1e3>900&&(e=!0),a=void 0,r=void 0,d=void 0,u=void 0}else e=!0;n=void 0,i=void 0,o=void 0}t=void 0,e&&reloadWithMessage("Timer error. Try reload to fix.",!0);try{return e}finally{e=void 0}}function action(){if(isKingReward)kingRewardAction();else if(pauseAtInvalidLocation&&huntLocation!=currentLocation)displayTimer("Out of pre-defined hunting location...","Out of pre-defined hunting location...","Out of pre-defined hunting location..."),fbPlatform?displayLocation(secureConnection?"<font color='red'>"+currentLocation+"</font> [<a onclick='window.localStorage.removeItem(\"huntLocation\");' href='https://www.mousehuntgame.com/canvas/'>Hunt Here</a>] - <i>Script pause because you had move to a different location recently, click hunt here to continue hunt at this location.</i>":"<font color='red'>"+currentLocation+"</font> [<a onclick='window.localStorage.removeItem(\"huntLocation\");' href='http://www.mousehuntgame.com/canvas/'>Hunt Here</a>] - <i>Script pause because you had move to a different location recently, click hunt here to continue hunt at this location.</i>"):hiFivePlatform?displayLocation(secureConnection?"<font color='red'>"+currentLocation+"</font> [<a onclick='window.localStorage.removeItem(\"huntLocation\");' href='https://mousehunt.hi5.hitgrab.com/'>Hunt Here</a>] - <i>Script pause because you had move to a different location recently, click hunt here to continue hunt at this location.</i>":"<font color='red'>"+currentLocation+"</font> [<a onclick='window.localStorage.removeItem(\"huntLocation\");' href='http://mousehunt.hi5.hitgrab.com/'>Hunt Here</a>] - <i>Script pause because you had move to a different location recently, click hunt here to continue hunt at this location.</i>"):mhPlatform&&displayLocation(secureConnection?"<font color='red'>"+currentLocation+"</font> [<a onclick='window.localStorage.removeItem(\"huntLocation\");' href='https://www.mousehuntgame.com/'>Hunt Here</a>] - <i>Script pause because you had move to a different location recently, click hunt here to continue hunt at this location.</i>":"<font color='red'>"+currentLocation+"</font> [<a onclick='window.localStorage.removeItem(\"huntLocation\");' href='http://www.mousehuntgame.com/'>Hunt Here</a>] - <i>Script pause because you had move to a different location recently, click hunt here to continue hunt at this location.</i>"),displayKingRewardSumTime(null);else if(0==baitQuantity)displayTimer("No more cheese!","Cannot hunt without the cheese...","Cannot hunt without the cheese..."),displayLocation(huntLocation),displayKingRewardSumTime(null);else{displayLocation(huntLocation);var e,t=!1;if(e=document.getElementById("header")){var n=e.getAttribute("class");-1!=n.indexOf("hornready")&&(soundHorn(),t=!0),n=void 0}e=void 0,0==t&&window.setTimeout(function(){countdownTimer()},1e3*timerRefreshInterval),t=void 0}}function countdownTimer(){if(isKingReward){displayTimer("King's Reward!","King's Reward!","King's Reward"),displayKingRewardSumTime("Now");var e=new Date;setStorage("lastKingRewardDate",e.toString()),e=void 0,lastKingRewardSumTime=0,fireEvent(document.getElementsByClassName("campbutton")[0].firstChild,"click"),window.setTimeout(function(){reloadWithMessage("Fail to click on camp button. Reloading...",!1)},5e3)}else if(pauseAtInvalidLocation&&huntLocation!=currentLocation)displayTimer("Out of pre-defined hunting location...","Out of pre-defined hunting location...","Out of pre-defined hunting location..."),fbPlatform?displayLocation(secureConnection?"<font color='red'>"+currentLocation+"</font> [<a onclick='window.localStorage.removeItem(\"huntLocation\");' href='https://www.mousehuntgame.com/canvas/'>Hunt Here</a>] - <i>Script pause because you had move to a different location recently, click hunt here to continue hunt at this location.</i>":"<font color='red'>"+currentLocation+"</font> [<a onclick='window.localStorage.removeItem(\"huntLocation\");' href='http://www.mousehuntgame.com/canvas/'>Hunt Here</a>] - <i>Script pause because you had move to a different location recently, click hunt here to continue hunt at this location.</i>"):hiFivePlatform?displayLocation(secureConnection?"<font color='red'>"+currentLocation+"</font> [<a onclick='window.localStorage.removeItem(\"huntLocation\");' href='https://mousehunt.hi5.hitgrab.com/'>Hunt Here</a>] - <i>Script pause because you had move to a different location recently, click hunt here to continue hunt at this location.</i>":"<font color='red'>"+currentLocation+"</font> [<a onclick='window.localStorage.removeItem(\"huntLocation\");' href='http://mousehunt.hi5.hitgrab.com/'>Hunt Here</a>] - <i>Script pause because you had move to a different location recently, click hunt here to continue hunt at this location.</i>"):mhPlatform&&displayLocation(secureConnection?"<font color='red'>"+currentLocation+"</font> [<a onclick='window.localStorage.removeItem(\"huntLocation\");' href='https://www.mousehuntgame.com/'>Hunt Here</a>] - <i>Script pause because you had move to a different location recently, click hunt here to continue hunt at this location.</i>":"<font color='red'>"+currentLocation+"</font> [<a onclick='window.localStorage.removeItem(\"huntLocation\");' href='http://www.mousehuntgame.com/'>Hunt Here</a>] - <i>Script pause because you had move to a different location recently, click hunt here to continue hunt at this location.</i>"),displayKingRewardSumTime(null);else if(0==baitQuantity)displayTimer("No more cheese!","Cannot hunt without the cheese...","Cannot hunt without the cheese..."),displayLocation(huntLocation),displayKingRewardSumTime(null);else{var t=new Date,n=timeElapsed(lastDateRecorded,t);if(lastDateRecorded=void 0,lastDateRecorded=t,t=void 0,enableTrapCheck?(hornTime-=n,checkTime-=n,-1!=lastKingRewardSumTime&&(lastKingRewardSumTime+=n)):(hornTime-=n,-1!=lastKingRewardSumTime&&(lastKingRewardSumTime+=n)),n=void 0,0>=hornTime)soundHorn();else if(enableTrapCheck&&0>=checkTime)trapCheck();else{if(enableTrapCheck)aggressiveMode?displayTimer("Horn: "+timeformat(hornTime)+" | Check: "+timeformat(checkTime),timeformat(hornTime)+"  <i>(lot faster than MouseHunt timer)</i>",timeformat(checkTime)+"  <i>(included extra "+timeformat(checkTimeDelay)+" delay)</i>"):displayTimer("Horn: "+timeformat(hornTime)+" | Check: "+timeformat(checkTime),timeformat(hornTime)+"  <i>(included extra "+timeformat(hornTimeDelay)+" delay & +/- 5 seconds different from MouseHunt timer)</i>",timeformat(checkTime)+"  <i>(included extra "+timeformat(checkTimeDelay)+" delay)</i>");else if(aggressiveMode){displayTimer("Horn: "+timeformat(hornTime),timeformat(hornTime)+"  <i>(lot faster than MouseHunt timer)</i>","-");var i=document.getElementById("header");if(i&&-1!=i.getAttribute("class").indexOf("hornready"))return soundHorn(),void(i=void 0);i=void 0}else{displayTimer("Horn: "+timeformat(hornTime),timeformat(hornTime)+"  <i>(included extra "+timeformat(hornTimeDelay)+" delay & +/- 5 seconds different from MouseHunt timer)</i>","-");var o=document.getElementById("scriptNode");if(o){var a=o.getAttribute("soundedHornAtt");if("true"==a)return void soundHorn();a=void 0}o=void 0}displayKingRewardSumTime(timeFormatLong(lastKingRewardSumTime)),window.setTimeout(function(){countdownTimer()},1e3*timerRefreshInterval)}}}function reloadPage(e){fbPlatform?window.location.href=secureConnection?e?"https://www.mousehuntgame.com/canvas/turn.php":"https://www.mousehuntgame.com/canvas/":e?"http://www.mousehuntgame.com/canvas/turn.php":"http://www.mousehuntgame.com/canvas/":hiFivePlatform?window.location.href=secureConnection?e?"https://mousehunt.hi5.hitgrab.com/turn.php":"https://mousehunt.hi5.hitgrab.com/":e?"http://mousehunt.hi5.hitgrab.com/turn.php":"http://mousehunt.hi5.hitgrab.com/":mhPlatform&&(window.location.href=secureConnection?e?"https://www.mousehuntgame.com/turn.php":"https://www.mousehuntgame.com/":e?"http://www.mousehuntgame.com/turn.php":"http://www.mousehuntgame.com/"),e=void 0}function reloadWithMessage(e,t){displayTimer(e,e,e,e),reloadPage(t),e=void 0,t=void 0}function embedTimer(e){if(showTimerInPage){var t;if(fbPlatform||hiFivePlatform||mhPlatform?t=document.getElementById("noscript"):mhMobilePlatform&&(t=document.getElementById("mobileHorn")),t){var n=document.createElement("div"),i=document.createElement("hr");n.appendChild(i),i=null;var o=document.createElement("div");if(o.setAttribute("id","titleElement"),o.innerHTML=e&&aggressiveMode?'<b><a href="https://greasyfork.org/en/scripts/6092-mousehunt-autobot-revamp" target="_blank">MouseHunt AutoBot (version '+scriptVersion+")</a> + MouseHunt AutoBot Additional thing (version "+addonScriptVer+")</b> - <font color='red'>Aggressive Mode</font>":'<b><a href="https://greasyfork.org/en/scripts/6092-mousehunt-autobot-revamp" target="_blank">MouseHunt AutoBot (version '+scriptVersion+")</a> + MouseHunt AutoBot Additional thing (version "+addonScriptVer+")</b>",n.appendChild(o),o=null,e){var a=document.createElement("div");a.setAttribute("id","updateElement"),n.appendChild(a),a=null;var r=document.createElement("div");r.setAttribute("id","NOBmessage"),n.appendChild(r),r=null,nextHornTimeElement=document.createElement("div"),nextHornTimeElement.setAttribute("id","nextHornTimeElement"),nextHornTimeElement.innerHTML="<b>Next Hunter Horn Time:</b> Loading...",n.appendChild(nextHornTimeElement),checkTimeElement=document.createElement("div"),checkTimeElement.setAttribute("id","checkTimeElement"),checkTimeElement.innerHTML="<b>Next Trap Check Time:</b> Loading...",n.appendChild(checkTimeElement),pauseAtInvalidLocation&&(travelElement=document.createElement("div"),travelElement.setAttribute("id","travelElement"),travelElement.innerHTML="<b>Target Hunt Location:</b> Loading...",n.appendChild(travelElement));var l,d=getStorage("lastKingRewardDate");if(void 0==d||null==d)l="-";else{var u=new Date(d);l=u.toDateString()+" "+u.toTimeString().substring(0,8),u=null}if(kingTimeElement=document.createElement("div"),kingTimeElement.setAttribute("id","kingTimeElement"),kingTimeElement.innerHTML="<b>Last King's Reward:</b> "+l+" ",n.appendChild(kingTimeElement),lastKingRewardSumTimeElement=document.createElement("font"),lastKingRewardSumTimeElement.setAttribute("id","lastKingRewardSumTimeElement"),lastKingRewardSumTimeElement.innerHTML="(Loading...)",kingTimeElement.appendChild(lastKingRewardSumTimeElement),d=null,l=null,showLastPageLoadTime){var s=new Date,c=document.createElement("div");c.setAttribute("id","loadTimeElement"),c.innerHTML="<b>Last Page Load: </b>"+s.toDateString()+" "+s.toTimeString().substring(0,8),n.appendChild(c),c=null,s=null}var m=document.createElement("a"),h=document.createTextNode("Click to toggle timers");m.href="#",m.setAttribute("id","timersElementToggle"),m.appendChild(h),n.appendChild(m),m.addEventListener("click",showHideTimers,!1),h=null;var p=document.createElement("div");p.setAttribute("id","loadTimersElement"),p.setAttribute("style","display: none;"),n.appendChild(p),n.appendChild(document.createElement("br"));var g=document.createElement("div");g.setAttribute("id","gDocArea");var f=document.createElement("span"),w=document.createElement("a");h=document.createTextNode("Click to submit to GDoc"),w.href="#",w.setAttribute("id","gDocLink"),w.appendChild(h),h=null,f.appendChild(w),g.appendChild(f),n.appendChild(g),w.addEventListener("click",NOBscript,!1),h=" &#126; <a href=\"javascript:window.open('https://docs.google.com/spreadsheet/ccc?key=0Ag_KH_nuVUjbdGtldjJkWUJ4V1ZpUDVwd1FVM0RTM1E#gid=5');\" target=_blank>Click to go to GDoc</a>";var T=document.createElement("span");T.innerHTML=h;var y=document.createElement("span");y.innerHTML=" &#126; <a href=\"javascript:window.open('http://goo.gl/forms/ayRsnizwL1');\" target=_blank>Click to submit a bug report/feedback</a>",g.appendChild(T),g.appendChild(y),h=null,T=null,y=null,f=null,g=null,m=null,p=null,w=null}else{var v=document.createElement("div");v.setAttribute("id","helpTextElement"),fbPlatform?v.innerHTML=secureConnection?"<b>Note:</b> MouseHunt AutoBot will only run at <a href='https://www.mousehuntgame.com/canvas/'>Hunter Camp</a>. This is to prevent the bot from interfering user's activity.":"<b>Note:</b> MouseHunt AutoBot will only run at <a href='http://www.mousehuntgame.com/canvas/'>Hunter Camp</a>. This is to prevent the bot from interfering user's activity.":hiFivePlatform?v.innerHTML=secureConnection?"<b>Note:</b> MouseHunt AutoBot will only run at <a href='https://mousehunt.hi5.hitgrab.com/'>Hunter Camp</a>. This is to prevent the bot from interfering user's activity.":"<b>Note:</b> MouseHunt AutoBot will only run at <a href='http://mousehunt.hi5.hitgrab.com/'>Hunter Camp</a>. This is to prevent the bot from interfering user's activity.":mhPlatform?v.innerHTML=secureConnection?"<b>Note:</b> MouseHunt AutoBot will only run at <a href='https://www.mousehuntgame.com/'>Hunter Camp</a>. This is to prevent the bot from interfering user's activity.":"<b>Note:</b> MouseHunt AutoBot will only run at <a href='http://www.mousehuntgame.com/'>Hunter Camp</a>. This is to prevent the bot from interfering user's activity.":mhMobilePlatform&&(v.innerHTML=secureConnection?"<b>Note:</b> Mobile version of Mousehunt is not supported currently. Please use the <a href='https://www.mousehuntgame.com/?switch_to=standard'>standard version of MouseHunt</a>.":"<b>Note:</b> Mobile version of Mousehunt is not supported currently. Please use the <a href='http://www.mousehuntgame.com/?switch_to=standard'>standard version of MouseHunt</a>."),n.appendChild(v),v=null}var b=getStorage("showPreference");(void 0==b||null==b)&&(b=!1,setStorage("showPreference",b));var k=document.createElement("div");k.setAttribute("id","showPreferenceLinkDiv"),k.setAttribute("style","text-align:right"),n.appendChild(k);var I=document.createElement("span"),S="<a id=\"showPreferenceLink\" name=\"showPreferenceLink\" onclick=\"if (document.getElementById('showPreferenceLink').innerHTML == '<b>[Hide Preference]</b>') { document.getElementById('preferenceDiv').style.display='none';  document.getElementById('showPreferenceLink').innerHTML='<b>[Show Preference]</b>'; } else { document.getElementById('preferenceDiv').style.display='block'; document.getElementById('showPreferenceLink').innerHTML='<b>[Hide Preference]</b>'; }\">";S+=1==b?"<b>[Hide Preference]</b>":"<b>[Show Preference]</b>",S+="</a>",S+="&nbsp;&nbsp;&nbsp;",I.innerHTML=S,k.appendChild(I),S=null,I=null,k=null;var M=document.createElement("hr");n.appendChild(M),M=null;var R='<table border="0" width="100%">';aggressiveMode?(R+="<tr>",R+='<td style="height:24px; text-align:right;">',R+='<a title="Bot aggressively by ignore all safety measure such as check horn image visible before sounding it">',R+="<b>Aggressive Mode</b>",R+="</a>",R+="&nbsp;&nbsp;:&nbsp;&nbsp;",R+="</td>",R+='<td style="height:24px">',R+='<input type="radio" id="AggressiveModeInputTrue" name="AggressiveModeInput" value="true" onchange="if (document.getElementById(\'AggressiveModeInputTrue\').checked == true) { document.getElementById(\'HornTimeDelayMinInput\').disabled=\'disabled\'; document.getElementById(\'HornTimeDelayMaxInput\').disabled=\'disabled\';}" checked="checked"/> True',R+="   ",R+="<input type=\"radio\" id=\"AggressiveModeInputFalse\" name=\"AggressiveModeInput\" value=\"false\" onchange=\"if (document.getElementById('AggressiveModeInputFalse').checked == true) { document.getElementById('HornTimeDelayMinInput').disabled=''; document.getElementById('HornTimeDelayMaxInput').disabled='';}\"/> False",R+="</td>",R+="</tr>",R+="<tr>",R+='<td style="height:24px; text-align:right;">',R+='<a title="Extra delay time before sounding the horn (in seconds)">',R+="<b>Horn Time Delay</b>",R+="</a>",R+="&nbsp;&nbsp;:&nbsp;&nbsp;",R+="</td>",R+='<td style="height:24px">',R+='<input type="text" id="HornTimeDelayMinInput" name="HornTimeDelayMinInput" disabled="disabled" value="'+hornTimeDelayMin.toString()+'"/> seconds',R+=" ~ ",R+='<input type="text" id="HornTimeDelayMaxInput" name="HornTimeDelayMaxInput" disabled="disabled" value="'+hornTimeDelayMax.toString()+'"/> seconds',R+="</td>",R+="</tr>"):(R+="<tr>",R+='<td style="height:24px; text-align:right;">',R+='<a title="Bot aggressively by ignore all safety measure such as check horn image visible before sounding it">',R+="<b>Aggressive Mode</b>",R+="</a>",R+="&nbsp;&nbsp;:&nbsp;&nbsp;",R+="</td>",R+='<td style="height:24px">',R+="<input type=\"radio\" id=\"AggressiveModeInputTrue\" name=\"AggressiveModeInput\" value=\"true\" onchange=\"if (document.getElementById('AggressiveModeInputTrue').checked == true) { document.getElementById('HornTimeDelayMinInput').disabled='disabled'; document.getElementById('HornTimeDelayMaxInput').disabled='disabled';}\"/> True",R+="   ",R+='<input type="radio" id="AggressiveModeInputFalse" name="AggressiveModeInput" value="false" onchange="if (document.getElementById(\'AggressiveModeInputFalse\').checked == true) { document.getElementById(\'HornTimeDelayMinInput\').disabled=\'\'; document.getElementById(\'HornTimeDelayMaxInput\').disabled=\'\';}" checked="checked"/> False',R+="</td>",R+="</tr>",R+="<tr>",R+='<td style="height:24px; text-align:right;">',R+='<a title="Extra delay time before sounding the horn (in seconds)">',R+="<b>Horn Time Delay</b>",R+="</a>&nbsp;&nbsp;:&nbsp;&nbsp;",R+="</td>",R+='<td style="height:24px">',R+='<input type="text" id="HornTimeDelayMinInput" name="HornTimeDelayMinInput" value="'+hornTimeDelayMin.toString()+'"/> seconds',R+=" ~ ",R+='<input type="text" id="HornTimeDelayMaxInput" name="HornTimeDelayMaxInput" value="'+hornTimeDelayMax.toString()+'"/> seconds',R+="</td>",R+="</tr>"),enableTrapCheck?(R+="<tr>",R+='<td style="height:24px; text-align:right;">',R+='<a title="Enable trap check once an hour"><b>Trap Check</b></a>',R+="&nbsp;&nbsp;:&nbsp;&nbsp;",R+="</td>",R+='<td style="height:24px">',R+="<input type=\"radio\" id=\"TrapCheckInputTrue\" name=\"TrapCheckInput\" value=\"true\" onchange=\"if (document.getElementById('TrapCheckInputTrue').checked == true) { document.getElementById('TrapCheckTimeOffsetInput').disabled=''; document.getElementById('TrapCheckTimeDelayMinInput').disabled=''; document.getElementById('TrapCheckTimeDelayMaxInput').disabled='';}\" checked=\"checked\"/> True",R+="   ",R+="<input type=\"radio\" id=\"TrapCheckInputFalse\" name=\"TrapCheckInput\" value=\"false\" onchange=\"if (document.getElementById('TrapCheckInputFalse').checked == true) { document.getElementById('TrapCheckTimeOffsetInput').disabled='disabled'; document.getElementById('TrapCheckTimeDelayMinInput').disabled='disabled'; document.getElementById('TrapCheckTimeDelayMaxInput').disabled='disabled';}\"/> False",R+="</td>",R+="</tr>",R+="<tr>",R+='<td style="height:24px; text-align:right;">',R+='<a title="Trap check time different value (00 minutes - 45 minutes)"><b>Trap Check Time Offset</b></a>',R+="&nbsp;&nbsp;:&nbsp;&nbsp;",R+="</td>",R+='<td style="height:24px">',R+='<input type="text" id="TrapCheckTimeOffsetInput" name="TrapCheckTimeOffsetInput" value="'+trapCheckTimeDiff.toString()+'"/> seconds',R+="</td>",R+="</tr>",R+="<tr>",R+='<td style="height:24px; text-align:right;">',R+='<a title="Extra delay time to trap check (in seconds)"><b>Trap Check Time Delay</b></a>',R+="&nbsp;&nbsp;:&nbsp;&nbsp;",R+="</td>",R+='<td style="height:24px">',R+='<input type="text" id="TrapCheckTimeDelayMinInput" name="TrapCheckTimeDelayMinInput" value="'+checkTimeDelayMin.toString()+'"/> seconds',R+=" ~ ",R+='<input type="text" id="TrapCheckTimeDelayMaxInput" name="TrapCheckTimeDelayMaxInput" value="'+checkTimeDelayMax.toString()+'"/> seconds',R+="</td>",R+="</tr>"):(R+="<tr>",R+='<td style="height:24px; text-align:right;">',R+='<a title="Enable trap check once an hour"><b>Trap Check</b></a>',R+="&nbsp;&nbsp;:&nbsp;&nbsp;",R+="</td>",R+='<td style="height:24px">',R+="<input type=\"radio\" id=\"TrapCheckInputTrue\" name=\"TrapCheckInput\" value=\"true\" onchange=\"if (document.getElementById('TrapCheckInputTrue').checked == true) { document.getElementById('TrapCheckTimeOffsetInput').disabled=''; document.getElementById('TrapCheckTimeDelayMinInput').disabled=''; document.getElementById('TrapCheckTimeDelayMaxInput').disabled='';}\"/> True",R+="   ",R+="<input type=\"radio\" id=\"TrapCheckInputFalse\" name=\"TrapCheckInput\" value=\"false\" onchange=\"if (document.getElementById('TrapCheckInputFalse').checked == true) { document.getElementById('TrapCheckTimeOffsetInput').disabled='disabled'; document.getElementById('TrapCheckTimeDelayMinInput').disabled='disabled'; document.getElementById('TrapCheckTimeDelayMaxInput').disabled='disabled';}\" checked=\"checked\"/> False",R+="</td>",R+="</tr>",R+="<tr>",R+='<td style="height:24px; text-align:right;">',R+='<a title="Trap check time different value (00 minutes - 45 minutes)"><b>Trap Check Time Offset</b></a>',R+="&nbsp;&nbsp;:&nbsp;&nbsp;",R+="</td>",R+='<td style="height:24px">',R+='<input type="text" id="TrapCheckTimeOffsetInput" name="TrapCheckTimeOffsetInput" disabled="disabled" value="'+trapCheckTimeDiff.toString()+'"/> seconds',R+="</td>",R+="</tr>",R+="<tr>",R+='<td style="height:24px; text-align:right;">',R+='<a title="Extra delay time to trap check (in seconds)"><b>Trap Check Time Delay</b></a>',R+="&nbsp;&nbsp;:&nbsp;&nbsp;",R+="</td>",R+='<td style="height:24px">',R+='<input type="text" id="TrapCheckTimeDelayMinInput" name="TrapCheckTimeDelayMinInput" disabled="disabled" value="'+checkTimeDelayMin.toString()+'"/> seconds',R+=" ~ ",R+='<input type="text" id="TrapCheckTimeDelayMaxInput" name="TrapCheckTimeDelayMaxInput" disabled="disabled" value="'+checkTimeDelayMax.toString()+'"/> seconds',R+="</td>",R+="</tr>"),isKingWarningSound?(R+="<tr>",R+='<td style="height:24px; text-align:right;">',R+='<a title="Play sound when encounter king\'s reward"><b>Play King Reward Sound</b></a>',R+="&nbsp;&nbsp;:&nbsp;&nbsp;",R+="</td>",R+='<td style="height:24px">',R+='<input type="radio" id="PlayKingRewardSoundInputTrue" name="PlayKingRewardSoundInput" value="true" checked="checked"/> True',R+="   ",R+='<input type="radio" id="PlayKingRewardSoundInputFalse" name="PlayKingRewardSoundInput" value="false" /> False',R+="</td>",R+="</tr>"):(R+="<tr>",R+='<td style="height:24px; text-align:right;">',R+='<a title="Play sound when encounter king\'s reward"><b>Play King Reward Sound</b></a>',R+="&nbsp;&nbsp;:&nbsp;&nbsp;",R+="</td>",R+='<td style="height:24px">',R+='<input type="radio" id="PlayKingRewardSoundInputTrue" name="PlayKingRewardSoundInput" value="true" /> True',R+="   ",R+='<input type="radio" id="PlayKingRewardSoundInputFalse" name="PlayKingRewardSoundInput" value="false" checked="checked"/> False',R+="</td>",R+="</tr>"),reloadKingReward?(R+="<tr>",R+='<td style="height:24px; text-align:right;">',R+='<a title="Reload the the page according to King Reward Resume Time when encount King Reward"><b>King Reward Resume</b></a>',R+="&nbsp;&nbsp;:&nbsp;&nbsp;",R+="</td>",R+='<td style="height:24px">',R+='<input type="radio" id="KingRewardResumeInputTrue" name="KingRewardResumeInput" value="true" onchange="if (document.getElementById(\'KingRewardResumeInputTrue\').checked == true) { document.getElementById(\'KingRewardResumeTimeInput\').disabled=\'\'; }" checked="checked"/> True',R+="   ",R+='<input type="radio" id="KingRewardResumeInputFalse" name="KingRewardResumeInput" value="false" onchange="if (document.getElementById(\'KingRewardResumeInputFalse\').checked == true) { document.getElementById(\'KingRewardResumeTimeInput\').disabled=\'disabled\'; }"/> False',R+="</td>",R+="</tr>",R+="<tr>",R+='<td style="height:24px; text-align:right;">',R+='<a title="Duration of pausing the script before reload the King\'s Reward page (in seconds)"><b>King Reward Resume Time</b></a>',R+="&nbsp;&nbsp;:&nbsp;&nbsp;",R+="</td>",R+='<td style="height:24px">',R+='<input type="text" id="KingRewardResumeTimeInput" name="KingRewardResumeTimeInput" value="'+kingPauseTimeMax.toString()+'"/> seconds',R+="</td>",R+="</tr>"):(R+="<tr>",R+='<td style="height:24px; text-align:right;">',R+='<a title="Reload the the page according to King Reward Resume Time when encounter King Reward"><b>King Reward Resume</b></a>',R+="&nbsp;&nbsp;:&nbsp;&nbsp;",R+="</td>",R+='<td style="height:24px">',R+='<input type="radio" id="KingRewardResumeInputTrue" name="KingRewardResumeInput" value="true" onchange="if (document.getElementById(\'KingRewardResumeInputTrue\').checked == true) { document.getElementById(\'KingRewardResumeTimeInput\').disabled=\'\'; }"/> True',R+="   ",R+='<input type="radio" id="KingRewardResumeInputFalse" name="KingRewardResumeInput" value="false" onchange="if (document.getElementById(\'KingRewardResumeInputFalse\').checked == true) { document.getElementById(\'KingRewardResumeTimeInput\').disabled=\'disabled\'; }" checked="checked"/> False',R+="</td>",R+="</tr>",R+="<tr>",R+='<td style="height:24px; text-align:right;">',R+='<a title="Duration of pausing the script before reload the King\'s Reward page (in seconds)"><b>King Reward Resume Time</b></a>',R+="&nbsp;&nbsp;:&nbsp;&nbsp;",R+="</td>",R+='<td style="height:24px">',R+='<input type="text" id="KingRewardResumeTimeInput" name="KingRewardResumeTimeInput" disabled="disabled" value="'+kingPauseTimeMax.toString()+'"/> seconds',R+="</td>",R+="</tr>"),pauseAtInvalidLocation?(R+="<tr>",R+='<td style="height:24px; text-align:right;">',R+='<a title="The script will pause if player at different location that hunt location set before"><b>Remember Location</b></a>',R+="&nbsp;&nbsp;:&nbsp;&nbsp;",R+="</td>",R+='<td style="height:24px">',R+='<input type="radio" id="PauseLocationInputTrue" name="PauseLocationInput" value="true" checked="checked"/> True',R+="   ",R+='<input type="radio" id="PauseLocationInputFalse" name="PauseLocationInput" value="false" /> False',R+="</td>",R+="</tr>"):(R+="<tr>",R+='<td style="height:24px; text-align:right;">',R+='<a title="The script will pause if player at different location that hunt location set before"><b>Remember Location</b></a>',R+="&nbsp;&nbsp;:&nbsp;&nbsp;",R+="</td>",R+='<td style="height:24px">',R+='<input type="radio" id="PauseLocationInputTrue" name="PauseLocationInput" value="true"/> True',R+="   ",R+='<input type="radio" id="PauseLocationInputFalse" name="PauseLocationInput" value="false" checked="checked"/> False',R+="</td>",R+="</tr>"),autopopkr?(R+="<tr>",R+='<td style="height:24px; text-align:right;">',R+='<a title="Auto Popup on KR"><b>Auto KR Popup</b></a>',R+="&nbsp;&nbsp;:&nbsp;&nbsp;",R+="</td>",R+='<td style="height:24px">',R+='<input type="radio" id="autopopkrTrue" name="autopopkrInput" value="true" checked="checked"/> True',R+="   ",R+='<input type="radio" id="autopopkrFalse" name="autopopkrInput" value="false" /> False',R+="</td>",R+="</tr>"):(R+="<tr>",R+='<td style="height:24px; text-align:right;">',R+='<a title="Auto Popup on KR"><b>Auto KR Popup</b></a>',R+="&nbsp;&nbsp;:&nbsp;&nbsp;",R+="</td>",R+='<td style="height:24px">',R+='<input type="radio" id="autopopkrTrue" name="autopopkrInput" value="true"/> True',R+="   ",R+='<input type="radio" id="autopopkrFalse" name="autopopkrInput" value="false" checked="checked"/> False',R+="</td>",R+="</tr>"),R+="<tr>",R+='<td style="height:24px; text-align:right;" colspan="2">',R+="(Changes only take place after user save the preference) ",R+="<input type=\"button\" id=\"PreferenceSaveInput\" value=\"Save\" onclick=\"	if (document.getElementById('AggressiveModeInputTrue').checked == true) { window.localStorage.setItem('AggressiveMode', 'true'); } else { window.localStorage.setItem('AggressiveMode', 'false'); }	window.localStorage.setItem('HornTimeDelayMin', document.getElementById('HornTimeDelayMinInput').value); window.localStorage.setItem('HornTimeDelayMax', document.getElementById('HornTimeDelayMaxInput').value);	if (document.getElementById('TrapCheckInputTrue').checked == true) { window.localStorage.setItem('TrapCheck', 'true'); } else { window.localStorage.setItem('TrapCheck', 'false'); }	window.localStorage.setItem('TrapCheckTimeOffset', document.getElementById('TrapCheckTimeOffsetInput').value);	window.localStorage.setItem('TrapCheckTimeDelayMin', document.getElementById('TrapCheckTimeDelayMinInput').value); window.localStorage.setItem('TrapCheckTimeDelayMax', document.getElementById('TrapCheckTimeDelayMaxInput').value);	if (document.getElementById('PlayKingRewardSoundInputTrue').checked == true) { window.localStorage.setItem('PlayKingRewardSound', 'true'); } else { window.localStorage.setItem('PlayKingRewardSound', 'false'); }	if (document.getElementById('KingRewardResumeInputTrue').checked == true) { window.localStorage.setItem('KingRewardResume', 'true'); } else { window.localStorage.setItem('KingRewardResume', 'false'); }	window.localStorage.setItem('KingRewardResumeTime', document.getElementById('KingRewardResumeTimeInput').value);	if (document.getElementById('PauseLocationInputTrue').checked == true) { window.localStorage.setItem('PauseLocation', 'true'); } else { window.localStorage.setItem('PauseLocation', 'false'); }	if (document.getElementById('autopopkrTrue').checked == true) { window.localStorage.setItem('autopopkr', 'true'); } else { window.localStorage.setItem('autopopkr', 'false'); }	",fbPlatform?R+=secureConnection?"window.location.href='https://www.mousehuntgame.com/canvas/';\"/>":"window.location.href='http://www.mousehuntgame.com/canvas/';\"/>":hiFivePlatform?R+=secureConnection?"window.location.href='https://mousehunt.hi5.hitgrab.com/';\"/>":"window.location.href='http://mousehunt.hi5.hitgrab.com/';\"/>":mhPlatform&&(R+=secureConnection?"window.location.href='https://www.mousehuntgame.com/';\"/>":"window.location.href='http://www.mousehuntgame.com/';\"/>"),R+="&nbsp;&nbsp;&nbsp;</td>",R+="</tr>",R+="</table>";
var x=document.createElement("div");x.setAttribute("id","preferenceDiv"),1==b?x.setAttribute("style","display: block"):x.setAttribute("style","display: none"),x.innerHTML=R,n.appendChild(x),R=null,b=null;var C=document.createElement("hr");x.appendChild(C),C=null,x=null,t.parentNode.insertBefore(n,t),n=null}t=null}e=null}function loadPreferenceSettingFromStorage(){var e=getStorage("AggressiveMode");void 0==e||null==e?setStorage("AggressiveMode",aggressiveMode.toString()):aggressiveMode=1==e||"true"==e.toLowerCase()?!0:!1,e=void 0;var t=getStorage("HornTimeDelayMin"),n=getStorage("HornTimeDelayMax");void 0==t||null==t||void 0==n||null==n?(setStorage("HornTimeDelayMin",hornTimeDelayMin),setStorage("HornTimeDelayMax",hornTimeDelayMax)):(hornTimeDelayMin=parseInt(t),hornTimeDelayMax=parseInt(n)),t=void 0,n=void 0;var i=getStorage("TrapCheck");void 0==i||null==i?setStorage("TrapCheck",enableTrapCheck.toString()):enableTrapCheck=1==i||"true"==i.toLowerCase()?!0:!1,i=void 0;var o=getStorage("TrapCheckTimeOffset");void 0==o||null==o?setStorage("TrapCheckTimeOffset",trapCheckTimeDiff):trapCheckTimeDiff=parseInt(o),o=void 0;var a=getStorage("TrapCheckTimeDelayMin"),r=getStorage("TrapCheckTimeDelayMax");void 0==a||null==a||void 0==r||null==r?(setStorage("TrapCheckTimeDelayMin",checkTimeDelayMin),setStorage("TrapCheckTimeDelayMax",checkTimeDelayMax)):(checkTimeDelayMin=parseInt(a),checkTimeDelayMax=parseInt(r)),a=void 0,r=void 0;var l=getStorage("PlayKingRewardSound");void 0==l||null==l?setStorage("PlayKingRewardSound",isKingWarningSound.toString()):isKingWarningSound=1==l||"true"==l.toLowerCase()?!0:!1,l=void 0;var d=getStorage("KingRewardResume");void 0==d||null==d?setStorage("KingRewardResume",reloadKingReward.toString()):reloadKingReward=1==d||"true"==d.toLowerCase()?!0:!1,d=void 0;var u=getStorage("KingRewardResumeTime");void 0==u||null==u?setStorage("KingRewardResumeTime",kingPauseTimeMax):kingPauseTimeMax=parseInt(u),u=void 0;var s=getStorage("PauseLocation");void 0==s||null==s?setStorage("PauseLocation",pauseAtInvalidLocation.toString()):pauseAtInvalidLocation=1==s||"true"==s.toLowerCase()?!0:!1,s=void 0;var c=getStorage("autopopkr");void 0==c||null==c?setStorage("autopopkr",autopopkr.toString()):autopopkr=1==c||"true"==c.toLowerCase()?!0:!1,c=void 0}function displayTimer(e,t,n){showTimerInTitle&&(document.title=e),showTimerInPage&&(nextHornTimeElement.innerHTML="<b>Next Hunter Horn Time:</b> "+t,checkTimeElement.innerHTML="<b>Next Trap Check Time:</b> "+n),e=null,t=null,n=null}function displayLocation(e){showTimerInPage&&pauseAtInvalidLocation&&(travelElement.innerHTML="<b>Hunt Location:</b> "+e),e=null}function displayKingRewardSumTime(e){showTimerInPage&&(lastKingRewardSumTimeElement.innerHTML=e?"("+e+")":""),e=null}function addGoogleAd(){var e=document.getElementById("autoBotAdDiv");e&&(e.parentNode.removeChild(e),e=null);var t;if(fbPlatform||hiFivePlatform||mhPlatform?t=document.getElementById("noscript"):mhMobilePlatform&&(t=document.getElementById("mobileHorn")),t){var n=document.createElement("div");n.setAttribute("id","autoBotAdDiv"),n.innerHTML='<script type="text/javascript"><!-- google_ad_client = "ca-pub-0646444153861496"; google_ad_slot = "5069542056"; google_ad_width = 728;google_ad_height = 90; //--> </script> <script type="text/javascript" src="http://pagead2.googlesyndication.com/pagead/show_ads.js"></script>',t.parentNode.insertBefore(n,t),timerDivElement=null}}function soundHorn(){displayTimer("Ready to Blow The Horn...","Ready to Blow The Horn...","Ready to Blow The Horn...");var e=document.getElementById("scriptNode");if(e&&e.setAttribute("soundedHornAtt","false"),e=null,aggressiveMode)fireEvent(document.getElementsByClassName("hornbutton")[0].firstChild,"click"),window.setTimeout(function(){afterSoundingHorn()},3e3);else{var t=document.getElementById("header");if(t){var n=t.getAttribute("class");if(-1!=n.indexOf("hornready")){displayTimer("Blowing The Horn...","Blowing The Horn...","Blowing The Horn...");var i=document.getElementsByClassName("hornbutton")[0].firstChild;fireEvent(i,"click"),i=null,t=null,n=null,window.setTimeout(function(){afterSoundingHorn()},5e3)}else if(-1!=n.indexOf("hornsounding")||-1!=n.indexOf("hornsounded"))displayTimer("Synchronizing Data...","Someone had just sound the horn. Synchronizing data...","Someone had just sound the horn. Synchronizing data..."),t=null,n=null,window.setTimeout(function(){afterSoundingHorn()},5e3);else if(-1!=n.indexOf("hornwaiting"))displayTimer("Synchronizing Data...","Hunter horn is not ready yet. Synchronizing data...","Hunter horn is not ready yet. Synchronizing data..."),retrieveData(),checkJournalDate(),t=null,n=null,window.setTimeout(function(){countdownTimer()},1e3*timerRefreshInterval);else{displayTimer("Synchronizing Data...","Hunter horn is missing. Synchronizing data...","Hunter horn is missing. Synchronizing data...");var i=document.getElementsByClassName("hornbutton")[0].firstChild;fireEvent(i,"click"),i=null,t=null,n=null,window.setTimeout(function(){afterSoundingHorn()},5e3)}}else t=null,reloadWithMessage("Fail to find the horn header. Reloading...",!1)}}function afterSoundingHorn(){var e=document.getElementById("scriptNode");e&&e.setAttribute("soundedHornAtt","false"),e=null;var t=document.getElementById("header");if(t){var n=t.getAttribute("class");if(-1!=n.indexOf("hornready")){displayTimer("Blowing The Horn Again...","Blowing The Horn Again...","Blowing The Horn Again...");var i=document.getElementsByClassName("hornbutton")[0].firstChild;fireEvent(i,"click"),i=null,t=null,n=null,++hornRetry,hornRetry>hornRetryMax?(reloadWithMessage("Detected script caught in loop. Reloading...",!0),hornRetry=0):window.setTimeout(function(){afterSoundingHorn()},1e3)}else-1!=n.indexOf("hornsounding")?(displayTimer("The horn sounding taken extra longer than normal...","The horn sounding taken extra longer than normal...","The horn sounding taken extra longer than normal..."),t=null,n=null,++hornRetry,hornRetry>hornRetryMax?(reloadWithMessage("Detected script caught in loop. Reloading...",!0),hornRetry=0):window.setTimeout(function(){afterSoundingHorn()},3e3)):(displayTimer("Horn sounded. Synchronizing Data...","Horn sounded. Synchronizing data...","Horn sounded. Synchronizing data..."),retrieveData(),t=null,n=null,window.setTimeout(function(){countdownTimer()},1e3*timerRefreshInterval),hornRetry=0)}}function embedScript(){var e=document.createElement("script");e.setAttribute("id","scriptNode"),e.setAttribute("type","text/javascript"),e.setAttribute("soundedHornAtt","false"),e.innerHTML='														function soundedHorn()														{																			var scriptNode = document.getElementById("scriptNode");					if (scriptNode)															{																		scriptNode.setAttribute("soundedHornAtt", "true");					}																		scriptNode = null;														}																			';var t;fbPlatform||hiFivePlatform||mhPlatform?t=document.getElementById("noscript"):mhMobilePlatform&&(t=document.getElementById("mobileHorn")),t.parentNode.insertBefore(e,t),e=null,t=null;var n=document.getElementsByClassName("hornbutton")[0].firstChild,i=n.getAttribute("onclick").toString(),o=i.indexOf("return false;"),a=i.substring(0,o)+"soundedHorn();"+i.substring(o);n.setAttribute("onclick",a),n=null,i=null,o=null,a=null}function kingRewardAction(){displayTimer("King's Reward!","King's Reward","King's Reward!"),displayLocation("-"),playKingRewardSound();var e=document.getElementsByTagName("input");if(e){var t;for(t=0;t<e.length;++t)if("puzzle_answer"==e[t].getAttribute("name")){e[t].focus();break}t=null}e=null;var n=new Date;setStorage("lastKingRewardDate",n.toString()),n=null,0>=kingPauseTimeMax&&(kingPauseTimeMax=1),kingPauseTime=kingPauseTimeMax,kingRewardCountdownTimer()}function notify(){if(!Notification)return void alert("Please us a modern version of Chrome, Firefox, Opera or Firefox.");"granted"!==Notification.permission&&Notification.requestPermission();var e=new Notification("KR NOW",{icon:"http://3.bp.blogspot.com/_O2yZIhpq9E8/TBoAMw0fMNI/AAAAAAAAAxo/1ytaIxQQz4o/s1600/Subliminal+Message.JPG",body:"Kings Reward NOW"});e.onclick=function(){window.open("https://www.mousehuntgame.com/"),e.close()},e.onshow=function(){setTimeout(function(){e.close()},5e3)}}function playKingRewardSound(){if(notify(),isKingWarningSound){var e=new Audio("https://raw.githubusercontent.com/nobodyrandom/mhAutobot/master/resource/horn.mp3");e.play();var t=document.getElementsByTagName("body"),n=document.createElement("button");n.setAttribute("id","stopAudio"),n.setAttribute("style","position: fixed;"),n.setAttribute("onclick","hornAudio.pause();"),n.innerHTML="CLICK ME TO STOP THIS ANNOYING MUSIC",t[0].appendChild(n),t=null,n=null,snippet=null}autopopkr&&alert("Kings Reward NOW")}function kingRewardCountdownTimer(){var e=new Date,t=timeElapsed(lastDateRecorded,e);if(lastDateRecorded=null,lastDateRecorded=e,e=null,reloadKingReward&&(kingPauseTime-=t),-1!=lastKingRewardSumTime&&(lastKingRewardSumTime+=t),t=null,0>=kingPauseTime){displayTimer("King's Reward - Reloading...","Reloading...","Reloading...");var n=document.getElementsByClassName("campbutton")[0].firstChild;fireEvent(n,"click"),n=null,window.setTimeout(function(){reloadWithMessage("Fail to click on camp button. Reloading...",!1)},5e3)}else reloadKingReward&&displayTimer("King's Reward - Reload in "+timeformat(kingPauseTime),"Reloading in "+timeformat(kingPauseTime),"Reloading in "+timeformat(kingPauseTime)),displayKingRewardSumTime(timeFormatLong(lastKingRewardSumTime)),checkResumeButton()||window.setTimeout(function(){kingRewardCountdownTimer()},1e3*timerRefreshInterval)}function checkResumeButton(){var e=!1,t=document.getElementsByTagName("img");if(t){var n;for(n=0;n<t.length;++n)if(-1!=t[n].getAttribute("src").indexOf("resume_hunting_blue.gif")){var i=t[n].parentNode;fireEvent(i,"click"),i=null,window.setTimeout(function(){reloadWithMessage("Fail to click on resume button. Reloading...",!1)},6e3),window.setTimeout(function(){checkResumeButton()},1e4),e=!0;break}n=null}t=null;try{return e}finally{e=null}}function trapCheck(){displayTimer("Checking The Trap...","Checking trap now...","Checking trap now...");var e=document.getElementsByClassName("campbutton")[0].firstChild;fireEvent(e,"click"),e=null,window.setTimeout(function(){reloadWithMessage("Fail to click on camp button. Reloading...",!1)},5e3)}function browserDetection(){var e="unknown",t=navigator.userAgent.toString().toLowerCase();t.indexOf("firefox")>=0?e="firefox":t.indexOf("opera")>=0?e="opera":t.indexOf("chrome")>=0&&(e="chrome"),t=null;try{return e}finally{e=null}}function setStorage(e,t){"localStorage"in window&&null!==window.localStorage&&window.localStorage.setItem(e,t),e=void 0,t=void 0}function removeStorage(e){"localStorage"in window&&null!==window.localStorage&&window.localStorage.removeItem(e),e=void 0}function getStorage(e){return"localStorage"in window&&null!==window.localStorage?window.localStorage.getItem(e):void(e=void 0)}function getCookie(e){if(document.cookie.length>0){var t=document.cookie.indexOf(e+"=");if(-1!=t){t=t+e.length+1;var n=document.cookie.indexOf(";",t);-1==n&&(n=document.cookie.length);var i=unescape(document.cookie.substring(t,n));e=null,t=null,n=null;try{return i}finally{i=null}}t=null}return e=null,null}function fireEvent(e,t){if(document.createEventObject){var n=document.createEventObject();try{return e.fireEvent("on"+t,n)}finally{e=null,t=null,n=null}}else{var n=document.createEvent("HTMLEvents");n.initEvent(t,!0,!0);try{return!e.dispatchEvent(n)}finally{e=null,t=null,n=null}}}function getPageVariableForChrome(e){var t=document.createElement("script");t.setAttribute("id","scriptElement"),t.setAttribute("type","text/javascript"),t.innerHTML="document.getElementById('scriptElement').innerText="+e+";",document.body.appendChild(t);var n=t.innerHTML;document.body.removeChild(t),t=null,e=null;try{return n}finally{n=null}}function timeElapsed(e,t){var n=0,i=Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds()),o=Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds());n=(o-i)/1e3,i=null,o=null,e=null,t=null;try{return n}finally{n=null}}function timeformat(e){var t,n=Math.floor(e/3600),i=Math.floor(e%3600/60),o=e%3600%60%60;t=n>0?n.toString()+" hr "+i.toString()+" min "+o.toString()+" sec":i>0?i.toString()+" min "+o.toString()+" sec":o.toString()+" sec",e=null,n=null,i=null,o=null;try{return t}finally{t=null}}function timeFormatLong(e){var t;if(-1!=e){var n=Math.floor(e/86400),i=Math.floor(e%86400/3600),o=Math.floor(e%3600/60);n>0?t=n.toString()+" day "+i.toString()+" hr "+o.toString()+" min ago":i>0?t=i.toString()+" hr "+o.toString()+" min ago":o>0&&(t=o.toString()+" min ago"),n=null,i=null,o=null}else t=null;e=null;try{return t}finally{t=null}}var hornTimeDelayMin=1,hornTimeDelayMax=150,aggressiveMode=!1,enableTrapCheck=!1,trapCheckTimeDiff=15,checkTimeDelayMin=15,checkTimeDelayMax=120,isKingWarningSound=!1,reloadKingReward=!1,kingPauseTimeMax=18e3,pauseAtInvalidLocation=!0,autopopkr=!0,showTimerInTitle=!0,showTimerInPage=!0,showLastPageLoadTime=!0,errorReloadTime=20,timerRefreshInterval=1,scriptVersion=GM_info.script.version,fbPlatform=!1,hiFivePlatform=!1,mhPlatform=!1,mhMobilePlatform=!1,secureConnection=!1,lastDateRecorded=new Date,hornTime=900,hornTimeDelay=0,checkTimeDelay=0,isKingReward=!1,lastKingRewardSumTime,kingPauseTime,baitQuantity=-1,huntLocation,currentLocation,today=new Date,checkTime=today.getMinutes()>=trapCheckTimeDiff?3600+60*trapCheckTimeDiff-(60*today.getMinutes()+today.getSeconds()):60*trapCheckTimeDiff-(60*today.getMinutes()+today.getSeconds());today=void 0;var hornRetryMax=10,hornRetry=0,nextActiveTime=900,timerInterval=2,titleElement,nextHornTimeElement,checkTimeElement,kingTimeElement,lastKingRewardSumTimeElement,optionElement,travelElement;exeScript();