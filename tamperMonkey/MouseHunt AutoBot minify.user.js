// ==UserScript==
// @name        MouseHunt AutoBot REVAMP
// @author      NobodyRandom
// @version    	1.4.404a
// @description An advance user script to automate sounding the hunter horn in MouseHunt application with the newest version supported and many other features and fixes. REVAMPED VERSION of ORIGINAL by Ooi
// @require		https://greasyfork.org/scripts/6094-mousehunt-autobot-additional-thing/code/MouseHunt%20AutoBot%20Additional%20thing.js?version=27186
// @namespace   https://greasyfork.org/users/6398
// @updateURL	https://greasyfork.org/scripts/6092-mousehunt-autobot/code/MouseHunt%20AutoBot.user.js
// @downloadURL	https://greasyfork.org/scripts/6092-mousehunt-autobot/code/MouseHunt%20AutoBot.user.js
// @license 	GNU GPL v2.0
// @include		http://mousehuntgame.com/*
// @include		https://mousehuntgame.com/*
// @include		http://www.mousehuntgame.com/*
// @include		https://www.mousehuntgame.com/*
// @include		http://apps.facebook.com/mousehunt/*
// @include		https://apps.facebook.com/mousehunt/*
// @include		http://hi5.com/friend/games/MouseHunt*
// @include		http://mousehunt.hi5.hitgrab.com/*
// ==/UserScript==

function exeScript(){if(trapCheckTimeDiff==60){trapCheckTimeDiff=0}else if(trapCheckTimeDiff<0||trapCheckTimeDiff>60){enableTrapCheck=false}if(showTimerInTitle){if(window.location.href.indexOf("apps.facebook.com/mousehunt/")!=-1){var e=document.getElementById("pagelet_canvas_content");if(e){var t=document.createElement("div");t.setAttribute("id","breakFrameDivElement");t.innerHTML="Timer cannot show on title page. You can <a href='http://www.mousehuntgame.com/canvas/'>run MouseHunt without iFrame (Facebook)</a> to enable timer on title page";e.parentNode.insertBefore(t,e)}e=undefined}else if(window.location.href.indexOf("hi5.com/friend/games/MouseHunt")!=-1){var e=document.getElementById("apps-canvas-body");if(e){var t=document.createElement("div");t.setAttribute("id","breakFrameDivElement");t.innerHTML="Timer cannot show on title page. You can <a href='http://mousehunt.hi5.hitgrab.com/'>run MouseHunt without iFrame (Hi5)</a> to enable timer on title page";e.parentNode.insertBefore(t,e)}e=undefined}}if(window.location.href.indexOf("mousehuntgame.com/canvas/")!=-1){fbPlatform=true}else if(window.location.href.indexOf("mousehuntgame.com")!=-1){var n=getCookie("switch_to");if(n!=null&&n=="mobile"){mhMobilePlatform=true}else{mhPlatform=true}n=undefined}else if(window.location.href.indexOf("mousehunt.hi5.hitgrab.com")!=-1){hiFivePlatform=true}if(window.location.href.indexOf("https://")!=-1){secureConnection=true}else{secureConnection=false}if(fbPlatform){if(window.location.href=="http://www.mousehuntgame.com/canvas/"||window.location.href=="http://www.mousehuntgame.com/canvas/#"||window.location.href=="https://www.mousehuntgame.com/canvas/"||window.location.href=="https://www.mousehuntgame.com/canvas/#"||window.location.href.indexOf("mousehuntgame.com/canvas/index.php")!=-1||window.location.href.indexOf("mousehuntgame.com/canvas/turn.php")!=-1||window.location.href.indexOf("mousehuntgame.com/canvas/?")!=-1){loadPreferenceSettingFromStorage();if(!checkIntroContainer()&&retrieveDataFirst()){embedTimer(true);embedScript();action()}else{document.title="Fail to retrieve data from page. Reloading in "+timeformat(errorReloadTime);window.setTimeout(function(){reloadPage(false)},errorReloadTime*1e3)}}else{embedTimer(false)}}else if(mhPlatform){if(window.location.href=="http://www.mousehuntgame.com/"||window.location.href=="http://www.mousehuntgame.com/#"||window.location.href=="http://www.mousehuntgame.com/?switch_to=standard"||window.location.href=="https://www.mousehuntgame.com/"||window.location.href=="https://www.mousehuntgame.com/#"||window.location.href=="https://www.mousehuntgame.com/?switch_to=standard"||window.location.href.indexOf("mousehuntgame.com/turn.php")!=-1||window.location.href.indexOf("mousehuntgame.com/index.php")!=-1){loadPreferenceSettingFromStorage();if(!checkIntroContainer()&&retrieveDataFirst()){embedTimer(true);embedScript();action()}else{document.title="Fail to retrieve data from page. Reloading in "+timeformat(errorReloadTime);window.setTimeout(function(){reloadPage(false)},errorReloadTime*1e3)}}else{embedTimer(false)}}else if(mhMobilePlatform){if(true){loadPreferenceSettingFromStorage();embedTimer(false)}}else if(hiFivePlatform){if(window.location.href=="http://mousehunt.hi5.hitgrab.com/#"||window.location.href.indexOf("http://mousehunt.hi5.hitgrab.com/?")!=-1||window.location.href=="http://mousehunt.hi5.hitgrab.com/"||window.location.href.indexOf("http://mousehunt.hi5.hitgrab.com/turn.php")!=-1||window.location.href.indexOf("http://mousehunt.hi5.hitgrab.com/index.php")!=-1){loadPreferenceSettingFromStorage();if(!checkIntroContainer()&&retrieveDataFirst()){embedTimer(true);embedScript();action()}else{document.title="Fail to retrieve data from page. Reloading in "+timeformat(errorReloadTime);window.setTimeout(function(){reloadPage(false)},errorReloadTime*1e3)}}else{embedTimer(false)}}}function checkIntroContainer(){var e=false;var t=document.getElementById("introContainer");if(t){t=undefined;e=true}else{e=false}try{return e}finally{e=undefined}}function retrieveDataFirst(){var e=false;var t=false;var n=false;var r=false;var i=document.getElementsByTagName("script");if(i){var s;for(s=0;s<i.length;++s){var o=i[s].innerHTML;var u=o.indexOf("next_activeturn_seconds");if(u>=0){var a=900;u+=25;var f=o.indexOf(",",u);var l=o.substring(u,f);a=parseInt(l);hornTimeDelay=hornTimeDelayMin+Math.round(Math.random()*(hornTimeDelayMax-hornTimeDelayMin));if(!aggressiveMode){var c=Math.ceil(a*.1);var h=o.indexOf("hud.timer_interval");if(h>=0){h+=21;var p=o.indexOf(";",h);var d=o.substring(h,p);var v=parseInt(d);if(v==1){c=2}h=undefined;p=undefined;d=undefined;v=undefined}hornTime=a+hornTimeDelay;lastDateRecorded=undefined;lastDateRecorded=new Date;c=undefined}else{hornTime=a;lastDateRecorded=undefined;lastDateRecorded=new Date}e=true;u=undefined;f=undefined;l=undefined;a=undefined}var m=o.indexOf("has_puzzle");if(m>=0){m+=12;var g=o.indexOf(",",m);var y=o.substring(m,g);isKingReward=y=="false"?false:true;t=true;m=undefined;g=undefined;y=undefined}var b=o.indexOf("bait_quantity");if(b>=0){b+=15;var w=o.indexOf(",",b);var E=o.substring(b,w);baitQuantity=parseInt(E);n=true;b=undefined;w=undefined;E=undefined}var S;var x;S=o.indexOf('location":"');if(S>=0){S+=11;x=o.indexOf('"',S);var T=o.substring(S,x);currentLocation=T;S=undefined;x=undefined;T=undefined}o=undefined}s=undefined}i=undefined;if(e&&t&&n){if(enableTrapCheck){var N=new Date;checkTimeDelay=checkTimeDelayMin+Math.round(Math.random()*(checkTimeDelayMax-checkTimeDelayMin));checkTime=N.getMinutes()>=trapCheckTimeDiff?3600+trapCheckTimeDiff*60-(N.getMinutes()*60+N.getSeconds()):trapCheckTimeDiff*60-(N.getMinutes()*60+N.getSeconds());checkTime+=checkTimeDelay;N=undefined}var C=getStorage("huntLocation");if(C==undefined||C==null){huntLocation=currentLocation;setStorage("huntLocation",currentLocation)}else{huntLocation=C;setStorage("huntLocation",huntLocation)}C=undefined;var k=getStorage("lastKingRewardDate");if(k==undefined||k==null){lastKingRewardSumTime=-1}else{var L=new Date(k);lastKingRewardSumTime=parseInt((new Date-L)/1e3);L=undefined}k=undefined;r=true}else{r=false}e=undefined;t=undefined;n=undefined;try{return r}finally{r=undefined}}function retrieveData(){var e=browserDetection();if(e=="firefox"){nextActiveTime=unsafeWindow.user.next_activeturn_seconds;isKingReward=unsafeWindow.user.has_puzzle;baitQuantity=unsafeWindow.user.bait_quantity;currentLocation=unsafeWindow.user.location}else if(e=="opera"){nextActiveTime=user.next_activeturn_seconds;isKingReward=user.has_puzzle;baitQuantity=user.bait_quantity;currentLocation=user.location}else if(e=="chrome"){nextActiveTime=parseInt(getPageVariableForChrome("user.next_activeturn_seconds"));isKingReward=getPageVariableForChrome("user.has_puzzle").toString()=="false"?false:true;baitQuantity=parseInt(getPageVariableForChrome("user.bait_quantity"));currentLocation=getPageVariableForChrome("user.location")}else{window.setTimeout(function(){reloadWithMessage("Browser not supported. Reloading...",false)},6e4)}e=undefined;if(nextActiveTime==""||isNaN(nextActiveTime)){window.setTimeout(function(){reloadWithMessage("Fail to retrieve data. Reloading...",false)},5e3)}else{hornTimeDelay=hornTimeDelayMin+Math.round(Math.random()*(hornTimeDelayMax-hornTimeDelayMin));if(!aggressiveMode){var t=Math.ceil(nextActiveTime*.1);if(timerInterval!=""&&!isNaN(timerInterval)&&timerInterval==1){t=2}hornTime=nextActiveTime+hornTimeDelay;lastDateRecorded=undefined;lastDateRecorded=new Date;t=undefined}else{hornTime=nextActiveTime;lastDateRecorded=undefined;lastDateRecorded=new Date}}if(enableTrapCheck){var n=new Date;checkTimeDelay=checkTimeDelayMin+Math.round(Math.random()*(checkTimeDelayMax-checkTimeDelayMin));checkTime=n.getMinutes()>=trapCheckTimeDiff?3600+trapCheckTimeDiff*60-(n.getMinutes()*60+n.getSeconds()):trapCheckTimeDiff*60-(n.getMinutes()*60+n.getSeconds());checkTime+=checkTimeDelay;n=undefined}}function getPageVariable(e,t){if(e=="user.next_activeturn_seconds"){nextActiveTime=parseInt(t)}else if(e=="hud.timer_interval"){timerInterval=parseInt(t)}else if(e=="user.has_puzzle"){isKingReward=t.toString()==true?true:false}else if(e=="user.bait_quantity"){baitQuantity=parseInt(t)}else if(e=="user.location"){currentLocation=t.toString()}e=undefined;t=undefined}function checkJournalDate(){var e=false;var t=document.getElementsByClassName("journaldate");if(t){var n=t[0].innerHTML.toString();var r=n.indexOf(":",0);var i=n.indexOf(" ",r);if(r>=1){var s=n.substring(0,r);var o=n.substring(r+1,2);var u=n.substring(i+1,2);var a=new Date;var f=new Date;if(u=="am"){f.setHours(parseInt(s),parseInt(o),0,0)}else{f.setHours(parseInt(s)+12,parseInt(o),0,0)}if(parseInt(a-f)/1e3>900){e=true}s=undefined;o=undefined;a=undefined;f=undefined}else{e=true}n=undefined;r=undefined;i=undefined}t=undefined;if(e){reloadWithMessage("Timer error. Try reload to fix.",true)}try{return e}finally{e=undefined}}function action(){if(isKingReward){kingRewardAction()}else if(pauseAtInvalidLocation&&huntLocation!=currentLocation){displayTimer("Out of pre-defined hunting location...","Out of pre-defined hunting location...","Out of pre-defined hunting location...");if(fbPlatform){if(secureConnection){displayLocation("<font color='red'>"+currentLocation+"</font> [<a onclick='window.localStorage.removeItem(\"huntLocation\");' href='https://www.mousehuntgame.com/canvas/'>Hunt Here</a>] - <i>Script pause because you had move to a different location recently, click hunt here to continue hunt at this location.</i>")}else{displayLocation("<font color='red'>"+currentLocation+"</font> [<a onclick='window.localStorage.removeItem(\"huntLocation\");' href='http://www.mousehuntgame.com/canvas/'>Hunt Here</a>] - <i>Script pause because you had move to a different location recently, click hunt here to continue hunt at this location.</i>")}}else if(hiFivePlatform){if(secureConnection){displayLocation("<font color='red'>"+currentLocation+"</font> [<a onclick='window.localStorage.removeItem(\"huntLocation\");' href='https://mousehunt.hi5.hitgrab.com/'>Hunt Here</a>] - <i>Script pause because you had move to a different location recently, click hunt here to continue hunt at this location.</i>")}else{displayLocation("<font color='red'>"+currentLocation+"</font> [<a onclick='window.localStorage.removeItem(\"huntLocation\");' href='http://mousehunt.hi5.hitgrab.com/'>Hunt Here</a>] - <i>Script pause because you had move to a different location recently, click hunt here to continue hunt at this location.</i>")}}else if(mhPlatform){if(secureConnection){displayLocation("<font color='red'>"+currentLocation+"</font> [<a onclick='window.localStorage.removeItem(\"huntLocation\");' href='https://www.mousehuntgame.com/'>Hunt Here</a>] - <i>Script pause because you had move to a different location recently, click hunt here to continue hunt at this location.</i>")}else{displayLocation("<font color='red'>"+currentLocation+"</font> [<a onclick='window.localStorage.removeItem(\"huntLocation\");' href='http://www.mousehuntgame.com/'>Hunt Here</a>] - <i>Script pause because you had move to a different location recently, click hunt here to continue hunt at this location.</i>")}}displayKingRewardSumTime(null)}else if(baitQuantity==0){displayTimer("No more cheese!","Cannot hunt without the cheese...","Cannot hunt without the cheese...");displayLocation(huntLocation);displayKingRewardSumTime(null)}else{displayLocation(huntLocation);var e=false;var t;t=document.getElementById("header");if(t){var n=t.getAttribute("class");if(n.indexOf("hornready")!=-1){soundHorn();e=true}n=undefined}t=undefined;if(e==false){window.setTimeout(function(){countdownTimer()},timerRefreshInterval*1e3)}e=undefined}}function countdownTimer(){if(isKingReward){displayTimer("King's Reward!","King's Reward!","King's Reward");displayKingRewardSumTime("Now");var e=new Date;setStorage("lastKingRewardDate",e.toString());e=undefined;lastKingRewardSumTime=0;fireEvent(document.getElementsByClassName("campbutton")[0].firstChild,"click");window.setTimeout(function(){reloadWithMessage("Fail to click on camp button. Reloading...",false)},5e3)}else if(pauseAtInvalidLocation&&huntLocation!=currentLocation){displayTimer("Out of pre-defined hunting location...","Out of pre-defined hunting location...","Out of pre-defined hunting location...");if(fbPlatform){if(secureConnection){displayLocation("<font color='red'>"+currentLocation+"</font> [<a onclick='window.localStorage.removeItem(\"huntLocation\");' href='https://www.mousehuntgame.com/canvas/'>Hunt Here</a>] - <i>Script pause because you had move to a different location recently, click hunt here to continue hunt at this location.</i>")}else{displayLocation("<font color='red'>"+currentLocation+"</font> [<a onclick='window.localStorage.removeItem(\"huntLocation\");' href='http://www.mousehuntgame.com/canvas/'>Hunt Here</a>] - <i>Script pause because you had move to a different location recently, click hunt here to continue hunt at this location.</i>")}}else if(hiFivePlatform){if(secureConnection){displayLocation("<font color='red'>"+currentLocation+"</font> [<a onclick='window.localStorage.removeItem(\"huntLocation\");' href='https://mousehunt.hi5.hitgrab.com/'>Hunt Here</a>] - <i>Script pause because you had move to a different location recently, click hunt here to continue hunt at this location.</i>")}else{displayLocation("<font color='red'>"+currentLocation+"</font> [<a onclick='window.localStorage.removeItem(\"huntLocation\");' href='http://mousehunt.hi5.hitgrab.com/'>Hunt Here</a>] - <i>Script pause because you had move to a different location recently, click hunt here to continue hunt at this location.</i>")}}else if(mhPlatform){if(secureConnection){displayLocation("<font color='red'>"+currentLocation+"</font> [<a onclick='window.localStorage.removeItem(\"huntLocation\");' href='https://www.mousehuntgame.com/'>Hunt Here</a>] - <i>Script pause because you had move to a different location recently, click hunt here to continue hunt at this location.</i>")}else{displayLocation("<font color='red'>"+currentLocation+"</font> [<a onclick='window.localStorage.removeItem(\"huntLocation\");' href='http://www.mousehuntgame.com/'>Hunt Here</a>] - <i>Script pause because you had move to a different location recently, click hunt here to continue hunt at this location.</i>")}}displayKingRewardSumTime(null)}else if(baitQuantity==0){displayTimer("No more cheese!","Cannot hunt without the cheese...","Cannot hunt without the cheese...");displayLocation(huntLocation);displayKingRewardSumTime(null)}else{var t=new Date;var n=timeElapsed(lastDateRecorded,t);lastDateRecorded=undefined;lastDateRecorded=t;t=undefined;if(enableTrapCheck){hornTime-=n;checkTime-=n;if(lastKingRewardSumTime!=-1){lastKingRewardSumTime+=n}}else{hornTime-=n;if(lastKingRewardSumTime!=-1){lastKingRewardSumTime+=n}}n=undefined;if(hornTime<=0){soundHorn()}else if(enableTrapCheck&&checkTime<=0){trapCheck()}else{if(enableTrapCheck){if(!aggressiveMode){displayTimer("Horn: "+timeformat(hornTime)+" | Check: "+timeformat(checkTime),timeformat(hornTime)+"  <i>(included extra "+timeformat(hornTimeDelay)+" delay & +/- 5 seconds different from MouseHunt timer)</i>",timeformat(checkTime)+"  <i>(included extra "+timeformat(checkTimeDelay)+" delay)</i>")}else{displayTimer("Horn: "+timeformat(hornTime)+" | Check: "+timeformat(checkTime),timeformat(hornTime)+"  <i>(lot faster than MouseHunt timer)</i>",timeformat(checkTime)+"  <i>(included extra "+timeformat(checkTimeDelay)+" delay)</i>")}}else{if(!aggressiveMode){displayTimer("Horn: "+timeformat(hornTime),timeformat(hornTime)+"  <i>(included extra "+timeformat(hornTimeDelay)+" delay & +/- 5 seconds different from MouseHunt timer)</i>","-");var r=document.getElementById("scriptNode");if(r){var i=r.getAttribute("soundedHornAtt");if(i=="true"){soundHorn();return}i=undefined}r=undefined}else{displayTimer("Horn: "+timeformat(hornTime),timeformat(hornTime)+"  <i>(lot faster than MouseHunt timer)</i>","-");var s=document.getElementById("header");if(s){if(s.getAttribute("class").indexOf("hornready")!=-1){soundHorn();s=undefined;return}}s=undefined}}displayKingRewardSumTime(timeFormatLong(lastKingRewardSumTime));window.setTimeout(function(){countdownTimer()},timerRefreshInterval*1e3)}}}function reloadPage(e){if(fbPlatform){if(secureConnection){if(e){window.location.href="https://www.mousehuntgame.com/canvas/turn.php"}else{window.location.href="https://www.mousehuntgame.com/canvas/"}}else{if(e){window.location.href="http://www.mousehuntgame.com/canvas/turn.php"}else{window.location.href="http://www.mousehuntgame.com/canvas/"}}}else if(hiFivePlatform){if(secureConnection){if(e){window.location.href="https://mousehunt.hi5.hitgrab.com/turn.php"}else{window.location.href="https://mousehunt.hi5.hitgrab.com/"}}else{if(e){window.location.href="http://mousehunt.hi5.hitgrab.com/turn.php"}else{window.location.href="http://mousehunt.hi5.hitgrab.com/"}}}else if(mhPlatform){if(secureConnection){if(e){window.location.href="https://www.mousehuntgame.com/turn.php"}else{window.location.href="https://www.mousehuntgame.com/"}}else{if(e){window.location.href="http://www.mousehuntgame.com/turn.php"}else{window.location.href="http://www.mousehuntgame.com/"}}}e=undefined}function reloadWithMessage(e,t){displayTimer(e,e,e,e);reloadPage(t);e=undefined;t=undefined}function embedTimer(e){if(showTimerInPage){var t;if(fbPlatform||hiFivePlatform||mhPlatform){t=document.getElementById("noscript")}else if(mhMobilePlatform){t=document.getElementById("mobileHorn")}if(t){var n=document.createElement("div");var r=document.createElement("hr");n.appendChild(r);r=null;var i=document.createElement("div");i.setAttribute("id","titleElement");if(e&&aggressiveMode){i.innerHTML='<b><a href="https://greasyfork.org/en/scripts/6092-mousehunt-autobot-revamp" target="_blank">MouseHunt AutoBot (version '+scriptVersion+")</a> + MouseHunt AutoBot Additional thing (version "+addonScriptVer+")</b> - <font color='red'>Aggressive Mode</font>"}else{i.innerHTML='<b><a href="https://greasyfork.org/en/scripts/6092-mousehunt-autobot-revamp" target="_blank">MouseHunt AutoBot (version '+scriptVersion+")</a> + MouseHunt AutoBot Additional thing (version "+addonScriptVer+")</b>"}n.appendChild(i);i=null;if(e){var s=document.createElement("div");s.setAttribute("id","updateElement");n.appendChild(s);s=null;var o=document.createElement("div");o.setAttribute("id","NOBmessage");n.appendChild(o);o=null;nextHornTimeElement=document.createElement("div");nextHornTimeElement.setAttribute("id","nextHornTimeElement");nextHornTimeElement.innerHTML="<b>Next Hunter Horn Time:</b> Loading...";n.appendChild(nextHornTimeElement);checkTimeElement=document.createElement("div");checkTimeElement.setAttribute("id","checkTimeElement");checkTimeElement.innerHTML="<b>Next Trap Check Time:</b> Loading...";n.appendChild(checkTimeElement);if(pauseAtInvalidLocation){travelElement=document.createElement("div");travelElement.setAttribute("id","travelElement");travelElement.innerHTML="<b>Target Hunt Location:</b> Loading...";n.appendChild(travelElement)}var u=getStorage("lastKingRewardDate");var a;if(u==undefined||u==null){a="-"}else{var f=new Date(u);a=f.toDateString()+" "+f.toTimeString().substring(0,8);f=null}kingTimeElement=document.createElement("div");kingTimeElement.setAttribute("id","kingTimeElement");kingTimeElement.innerHTML="<b>Last King's Reward:</b> "+a+" ";n.appendChild(kingTimeElement);lastKingRewardSumTimeElement=document.createElement("font");lastKingRewardSumTimeElement.setAttribute("id","lastKingRewardSumTimeElement");lastKingRewardSumTimeElement.innerHTML="(Loading...)";kingTimeElement.appendChild(lastKingRewardSumTimeElement);u=null;a=null;if(showLastPageLoadTime){var l=new Date;var c=document.createElement("div");c.setAttribute("id","loadTimeElement");c.innerHTML="<b>Last Page Load: </b>"+l.toDateString()+" "+l.toTimeString().substring(0,8);n.appendChild(c);c=null;l=null}var h=document.createElement("a");var p=document.createTextNode("Click to toggle timers");h.href="#";h.setAttribute("id","timersElementToggle");h.appendChild(p);n.appendChild(h);h.addEventListener("click",showHideTimers,false);p=null;var d=document.createElement("div");d.setAttribute("id","loadTimersElement");d.setAttribute("style","display: none;");n.appendChild(d);n.appendChild(document.createElement("br"));var v=document.createElement("div");v.setAttribute("id","gDocArea");var m=document.createElement("span");var g=document.createElement("a");p=document.createTextNode("Click to submit to GDoc");g.href="#";g.setAttribute("id","gDocLink");g.appendChild(p);p=null;m.appendChild(g);v.appendChild(m);n.appendChild(v);g.addEventListener("click",NOBscript,false);p=" &#126; <a href=\"javascript:window.open('https://docs.google.com/spreadsheet/ccc?key=0Ag_KH_nuVUjbdGtldjJkWUJ4V1ZpUDVwd1FVM0RTM1E#gid=5');\" target=_blank>Click to go to GDoc</a>";var y=document.createElement("span");y.innerHTML=p;var b=document.createElement("span");b.innerHTML=" &#126; <a href=\"javascript:window.open('http://goo.gl/forms/ayRsnizwL1');\" target=_blank>Click to submit a bug report/feedback</a>";v.appendChild(y);v.appendChild(b);p=null;y=null;b=null;m=null;v=null;h=null;d=null;g=null}else{var w=document.createElement("div");w.setAttribute("id","helpTextElement");if(fbPlatform){if(secureConnection){w.innerHTML="<b>Note:</b> MouseHunt AutoBot will only run at <a href='https://www.mousehuntgame.com/canvas/'>Hunter Camp</a>. This is to prevent the bot from interfering user's activity."}else{w.innerHTML="<b>Note:</b> MouseHunt AutoBot will only run at <a href='http://www.mousehuntgame.com/canvas/'>Hunter Camp</a>. This is to prevent the bot from interfering user's activity."}}else if(hiFivePlatform){if(secureConnection){w.innerHTML="<b>Note:</b> MouseHunt AutoBot will only run at <a href='https://mousehunt.hi5.hitgrab.com/'>Hunter Camp</a>. This is to prevent the bot from interfering user's activity."}else{w.innerHTML="<b>Note:</b> MouseHunt AutoBot will only run at <a href='http://mousehunt.hi5.hitgrab.com/'>Hunter Camp</a>. This is to prevent the bot from interfering user's activity."}}else if(mhPlatform){if(secureConnection){w.innerHTML="<b>Note:</b> MouseHunt AutoBot will only run at <a href='https://www.mousehuntgame.com/'>Hunter Camp</a>. This is to prevent the bot from interfering user's activity."}else{w.innerHTML="<b>Note:</b> MouseHunt AutoBot will only run at <a href='http://www.mousehuntgame.com/'>Hunter Camp</a>. This is to prevent the bot from interfering user's activity."}}else if(mhMobilePlatform){if(secureConnection){w.innerHTML="<b>Note:</b> Mobile version of Mousehunt is not supported currently. Please use the <a href='https://www.mousehuntgame.com/?switch_to=standard'>standard version of MouseHunt</a>."}else{w.innerHTML="<b>Note:</b> Mobile version of Mousehunt is not supported currently. Please use the <a href='http://www.mousehuntgame.com/?switch_to=standard'>standard version of MouseHunt</a>."}}n.appendChild(w);w=null}var E=getStorage("showPreference");if(E==undefined||E==null){E=false;setStorage("showPreference",E)}var S=document.createElement("div");S.setAttribute("id","showPreferenceLinkDiv");S.setAttribute("style","text-align:right");n.appendChild(S);var x=document.createElement("span");var T="<a id=\"showPreferenceLink\" name=\"showPreferenceLink\" onclick=\"if (document.getElementById('showPreferenceLink').innerHTML == '<b>[Hide Preference]</b>') { document.getElementById('preferenceDiv').style.display='none';  document.getElementById('showPreferenceLink').innerHTML='<b>[Show Preference]</b>'; } else { document.getElementById('preferenceDiv').style.display='block'; document.getElementById('showPreferenceLink').innerHTML='<b>[Hide Preference]</b>'; }\">";if(E==true)T+="<b>[Hide Preference]</b>";else T+="<b>[Show Preference]</b>";T+="</a>";T+="&nbsp;&nbsp;&nbsp;";x.innerHTML=T;S.appendChild(x);T=null;x=null;S=null;var N=document.createElement("hr");n.appendChild(N);N=null;var C='<table border="0" width="100%">';if(aggressiveMode){C+="<tr>";C+='<td style="height:24px; text-align:right;">';C+='<a title="Bot aggressively by ignore all safety measure such as check horn image visible before sounding it">';C+="<b>Aggressive Mode</b>";C+="</a>";C+="&nbsp;&nbsp;:&nbsp;&nbsp;";C+="</td>";C+='<td style="height:24px">';C+='<input type="radio" id="AggressiveModeInputTrue" name="AggressiveModeInput" value="true" onchange="if (document.getElementById(\'AggressiveModeInputTrue\').checked == true) { document.getElementById(\'HornTimeDelayMinInput\').disabled=\'disabled\'; document.getElementById(\'HornTimeDelayMaxInput\').disabled=\'disabled\';}" checked="checked"/> True';C+="   ";C+="<input type=\"radio\" id=\"AggressiveModeInputFalse\" name=\"AggressiveModeInput\" value=\"false\" onchange=\"if (document.getElementById('AggressiveModeInputFalse').checked == true) { document.getElementById('HornTimeDelayMinInput').disabled=''; document.getElementById('HornTimeDelayMaxInput').disabled='';}\"/> False";C+="</td>";C+="</tr>";C+="<tr>";C+='<td style="height:24px; text-align:right;">';C+='<a title="Extra delay time before sounding the horn (in seconds)">';C+="<b>Horn Time Delay</b>";C+="</a>";C+="&nbsp;&nbsp;:&nbsp;&nbsp;";C+="</td>";C+='<td style="height:24px">';C+='<input type="text" id="HornTimeDelayMinInput" name="HornTimeDelayMinInput" disabled="disabled" value="'+hornTimeDelayMin.toString()+'"/> seconds';C+=" ~ ";C+='<input type="text" id="HornTimeDelayMaxInput" name="HornTimeDelayMaxInput" disabled="disabled" value="'+hornTimeDelayMax.toString()+'"/> seconds';C+="</td>";C+="</tr>"}else{C+="<tr>";C+='<td style="height:24px; text-align:right;">';C+='<a title="Bot aggressively by ignore all safety measure such as check horn image visible before sounding it">';C+="<b>Aggressive Mode</b>";C+="</a>";C+="&nbsp;&nbsp;:&nbsp;&nbsp;";C+="</td>";C+='<td style="height:24px">';C+="<input type=\"radio\" id=\"AggressiveModeInputTrue\" name=\"AggressiveModeInput\" value=\"true\" onchange=\"if (document.getElementById('AggressiveModeInputTrue').checked == true) { document.getElementById('HornTimeDelayMinInput').disabled='disabled'; document.getElementById('HornTimeDelayMaxInput').disabled='disabled';}\"/> True";C+="   ";C+='<input type="radio" id="AggressiveModeInputFalse" name="AggressiveModeInput" value="false" onchange="if (document.getElementById(\'AggressiveModeInputFalse\').checked == true) { document.getElementById(\'HornTimeDelayMinInput\').disabled=\'\'; document.getElementById(\'HornTimeDelayMaxInput\').disabled=\'\';}" checked="checked"/> False';C+="</td>";C+="</tr>";C+="<tr>";C+='<td style="height:24px; text-align:right;">';C+='<a title="Extra delay time before sounding the horn (in seconds)">';C+="<b>Horn Time Delay</b>";C+="</a>&nbsp;&nbsp;:&nbsp;&nbsp;";C+="</td>";C+='<td style="height:24px">';C+='<input type="text" id="HornTimeDelayMinInput" name="HornTimeDelayMinInput" value="'+hornTimeDelayMin.toString()+'"/> seconds';C+=" ~ ";C+='<input type="text" id="HornTimeDelayMaxInput" name="HornTimeDelayMaxInput" value="'+hornTimeDelayMax.toString()+'"/> seconds';C+="</td>";C+="</tr>"}if(enableTrapCheck){C+="<tr>";C+='<td style="height:24px; text-align:right;">';C+='<a title="Enable trap check once an hour"><b>Trap Check</b></a>';C+="&nbsp;&nbsp;:&nbsp;&nbsp;";C+="</td>";C+='<td style="height:24px">';C+="<input type=\"radio\" id=\"TrapCheckInputTrue\" name=\"TrapCheckInput\" value=\"true\" onchange=\"if (document.getElementById('TrapCheckInputTrue').checked == true) { document.getElementById('TrapCheckTimeOffsetInput').disabled=''; document.getElementById('TrapCheckTimeDelayMinInput').disabled=''; document.getElementById('TrapCheckTimeDelayMaxInput').disabled='';}\" checked=\"checked\"/> True";C+="   ";C+="<input type=\"radio\" id=\"TrapCheckInputFalse\" name=\"TrapCheckInput\" value=\"false\" onchange=\"if (document.getElementById('TrapCheckInputFalse').checked == true) { document.getElementById('TrapCheckTimeOffsetInput').disabled='disabled'; document.getElementById('TrapCheckTimeDelayMinInput').disabled='disabled'; document.getElementById('TrapCheckTimeDelayMaxInput').disabled='disabled';}\"/> False";C+="</td>";C+="</tr>";C+="<tr>";C+='<td style="height:24px; text-align:right;">';C+='<a title="Trap check time different value (00 minutes - 45 minutes)"><b>Trap Check Time Offset</b></a>';C+="&nbsp;&nbsp;:&nbsp;&nbsp;";C+="</td>";C+='<td style="height:24px">';C+='<input type="text" id="TrapCheckTimeOffsetInput" name="TrapCheckTimeOffsetInput" value="'+trapCheckTimeDiff.toString()+'"/> seconds';C+="</td>";C+="</tr>";C+="<tr>";C+='<td style="height:24px; text-align:right;">';C+='<a title="Extra delay time to trap check (in seconds)"><b>Trap Check Time Delay</b></a>';C+="&nbsp;&nbsp;:&nbsp;&nbsp;";C+="</td>";C+='<td style="height:24px">';C+='<input type="text" id="TrapCheckTimeDelayMinInput" name="TrapCheckTimeDelayMinInput" value="'+checkTimeDelayMin.toString()+'"/> seconds';C+=" ~ ";C+='<input type="text" id="TrapCheckTimeDelayMaxInput" name="TrapCheckTimeDelayMaxInput" value="'+checkTimeDelayMax.toString()+'"/> seconds';C+="</td>";C+="</tr>"}else{C+="<tr>";C+='<td style="height:24px; text-align:right;">';C+='<a title="Enable trap check once an hour"><b>Trap Check</b></a>';C+="&nbsp;&nbsp;:&nbsp;&nbsp;";C+="</td>";C+='<td style="height:24px">';C+="<input type=\"radio\" id=\"TrapCheckInputTrue\" name=\"TrapCheckInput\" value=\"true\" onchange=\"if (document.getElementById('TrapCheckInputTrue').checked == true) { document.getElementById('TrapCheckTimeOffsetInput').disabled=''; document.getElementById('TrapCheckTimeDelayMinInput').disabled=''; document.getElementById('TrapCheckTimeDelayMaxInput').disabled='';}\"/> True";C+="   ";C+="<input type=\"radio\" id=\"TrapCheckInputFalse\" name=\"TrapCheckInput\" value=\"false\" onchange=\"if (document.getElementById('TrapCheckInputFalse').checked == true) { document.getElementById('TrapCheckTimeOffsetInput').disabled='disabled'; document.getElementById('TrapCheckTimeDelayMinInput').disabled='disabled'; document.getElementById('TrapCheckTimeDelayMaxInput').disabled='disabled';}\" checked=\"checked\"/> False";C+="</td>";C+="</tr>";C+="<tr>";C+='<td style="height:24px; text-align:right;">';C+='<a title="Trap check time different value (00 minutes - 45 minutes)"><b>Trap Check Time Offset</b></a>';C+="&nbsp;&nbsp;:&nbsp;&nbsp;";C+="</td>";C+='<td style="height:24px">';C+='<input type="text" id="TrapCheckTimeOffsetInput" name="TrapCheckTimeOffsetInput" disabled="disabled" value="'+trapCheckTimeDiff.toString()+'"/> seconds';C+="</td>";C+="</tr>";C+="<tr>";C+='<td style="height:24px; text-align:right;">';C+='<a title="Extra delay time to trap check (in seconds)"><b>Trap Check Time Delay</b></a>';C+="&nbsp;&nbsp;:&nbsp;&nbsp;";C+="</td>";C+='<td style="height:24px">';C+='<input type="text" id="TrapCheckTimeDelayMinInput" name="TrapCheckTimeDelayMinInput" disabled="disabled" value="'+checkTimeDelayMin.toString()+'"/> seconds';C+=" ~ ";C+='<input type="text" id="TrapCheckTimeDelayMaxInput" name="TrapCheckTimeDelayMaxInput" disabled="disabled" value="'+checkTimeDelayMax.toString()+'"/> seconds';C+="</td>";C+="</tr>"}if(isKingWarningSound){C+="<tr>";C+='<td style="height:24px; text-align:right;">';C+='<a title="Play sound when encounter king\'s reward"><b>Play King Reward Sound</b></a>';C+="&nbsp;&nbsp;:&nbsp;&nbsp;";C+="</td>";C+='<td style="height:24px">';C+='<input type="radio" id="PlayKingRewardSoundInputTrue" name="PlayKingRewardSoundInput" value="true" checked="checked"/> True';C+="   ";C+='<input type="radio" id="PlayKingRewardSoundInputFalse" name="PlayKingRewardSoundInput" value="false" /> False';C+="</td>";C+="</tr>"}else{C+="<tr>";C+='<td style="height:24px; text-align:right;">';C+='<a title="Play sound when encounter king\'s reward"><b>Play King Reward Sound</b></a>';C+="&nbsp;&nbsp;:&nbsp;&nbsp;";C+="</td>";C+='<td style="height:24px">';C+='<input type="radio" id="PlayKingRewardSoundInputTrue" name="PlayKingRewardSoundInput" value="true" /> True';C+="   ";C+='<input type="radio" id="PlayKingRewardSoundInputFalse" name="PlayKingRewardSoundInput" value="false" checked="checked"/> False';C+="</td>";C+="</tr>"}if(reloadKingReward){C+="<tr>";C+='<td style="height:24px; text-align:right;">';C+='<a title="Reload the the page according to King Reward Resume Time when encount King Reward"><b>King Reward Resume</b></a>';C+="&nbsp;&nbsp;:&nbsp;&nbsp;";C+="</td>";C+='<td style="height:24px">';C+='<input type="radio" id="KingRewardResumeInputTrue" name="KingRewardResumeInput" value="true" onchange="if (document.getElementById(\'KingRewardResumeInputTrue\').checked == true) { document.getElementById(\'KingRewardResumeTimeInput\').disabled=\'\'; }" checked="checked"/> True';C+="   ";C+='<input type="radio" id="KingRewardResumeInputFalse" name="KingRewardResumeInput" value="false" onchange="if (document.getElementById(\'KingRewardResumeInputFalse\').checked == true) { document.getElementById(\'KingRewardResumeTimeInput\').disabled=\'disabled\'; }"/> False';C+="</td>";C+="</tr>";C+="<tr>";C+='<td style="height:24px; text-align:right;">';C+='<a title="Duration of pausing the script before reload the King\'s Reward page (in seconds)"><b>King Reward Resume Time</b></a>';C+="&nbsp;&nbsp;:&nbsp;&nbsp;";C+="</td>";C+='<td style="height:24px">';C+='<input type="text" id="KingRewardResumeTimeInput" name="KingRewardResumeTimeInput" value="'+kingPauseTimeMax.toString()+'"/> seconds';C+="</td>";C+="</tr>"}else{C+="<tr>";C+='<td style="height:24px; text-align:right;">';C+='<a title="Reload the the page according to King Reward Resume Time when encounter King Reward"><b>King Reward Resume</b></a>';C+="&nbsp;&nbsp;:&nbsp;&nbsp;";C+="</td>";C+='<td style="height:24px">';C+='<input type="radio" id="KingRewardResumeInputTrue" name="KingRewardResumeInput" value="true" onchange="if (document.getElementById(\'KingRewardResumeInputTrue\').checked == true) { document.getElementById(\'KingRewardResumeTimeInput\').disabled=\'\'; }"/> True';C+="   ";C+='<input type="radio" id="KingRewardResumeInputFalse" name="KingRewardResumeInput" value="false" onchange="if (document.getElementById(\'KingRewardResumeInputFalse\').checked == true) { document.getElementById(\'KingRewardResumeTimeInput\').disabled=\'disabled\'; }" checked="checked"/> False';C+="</td>";C+="</tr>";C+="<tr>";C+='<td style="height:24px; text-align:right;">';C+='<a title="Duration of pausing the script before reload the King\'s Reward page (in seconds)"><b>King Reward Resume Time</b></a>';C+="&nbsp;&nbsp;:&nbsp;&nbsp;";C+="</td>";C+='<td style="height:24px">';C+='<input type="text" id="KingRewardResumeTimeInput" name="KingRewardResumeTimeInput" disabled="disabled" value="'+kingPauseTimeMax.toString()+'"/> seconds';C+="</td>";C+="</tr>"}if(pauseAtInvalidLocation){C+="<tr>";C+='<td style="height:24px; text-align:right;">';C+='<a title="The script will pause if player at different location that hunt location set before"><b>Remember Location</b></a>';C+="&nbsp;&nbsp;:&nbsp;&nbsp;";C+="</td>";C+='<td style="height:24px">';C+='<input type="radio" id="PauseLocationInputTrue" name="PauseLocationInput" value="true" checked="checked"/> True';C+="   ";C+='<input type="radio" id="PauseLocationInputFalse" name="PauseLocationInput" value="false" /> False';C+="</td>";C+="</tr>"}else{C+="<tr>";C+='<td style="height:24px; text-align:right;">';C+='<a title="The script will pause if player at different location that hunt location set before"><b>Remember Location</b></a>';C+="&nbsp;&nbsp;:&nbsp;&nbsp;";C+="</td>";C+='<td style="height:24px">';C+='<input type="radio" id="PauseLocationInputTrue" name="PauseLocationInput" value="true"/> True';C+="   ";C+='<input type="radio" id="PauseLocationInputFalse" name="PauseLocationInput" value="false" checked="checked"/> False';C+="</td>";C+="</tr>"}if(autopopkr){C+="<tr>";C+='<td style="height:24px; text-align:right;">';C+='<a title="Auto Popup on KR"><b>Auto KR Popup</b></a>';C+="&nbsp;&nbsp;:&nbsp;&nbsp;";C+="</td>";C+='<td style="height:24px">';C+='<input type="radio" id="autopopkrTrue" name="autopopkrInput" value="true" checked="checked"/> True';C+="   ";C+='<input type="radio" id="autopopkrFalse" name="autopopkrInput" value="false" /> False';C+="</td>";C+="</tr>"}else{C+="<tr>";C+='<td style="height:24px; text-align:right;">';C+='<a title="Auto Popup on KR"><b>Auto KR Popup</b></a>';C+="&nbsp;&nbsp;:&nbsp;&nbsp;";C+="</td>";C+='<td style="height:24px">';C+='<input type="radio" id="autopopkrTrue" name="autopopkrInput" value="true"/> True';C+="   ";C+='<input type="radio" id="autopopkrFalse" name="autopopkrInput" value="false" checked="checked"/> False';C+="</td>";C+="</tr>"}C+="<tr>";C+='<td style="height:24px; text-align:right;" colspan="2">';C+="(Changes only take place after user save the preference) ";C+="<input type=\"button\" id=\"PreferenceSaveInput\" value=\"Save\" onclick=\"	if (document.getElementById('AggressiveModeInputTrue').checked == true) { window.localStorage.setItem('AggressiveMode', 'true'); } else { window.localStorage.setItem('AggressiveMode', 'false'); }	window.localStorage.setItem('HornTimeDelayMin', document.getElementById('HornTimeDelayMinInput').value); window.localStorage.setItem('HornTimeDelayMax', document.getElementById('HornTimeDelayMaxInput').value);	if (document.getElementById('TrapCheckInputTrue').checked == true) { window.localStorage.setItem('TrapCheck', 'true'); } else { window.localStorage.setItem('TrapCheck', 'false'); }	window.localStorage.setItem('TrapCheckTimeOffset', document.getElementById('TrapCheckTimeOffsetInput').value);	window.localStorage.setItem('TrapCheckTimeDelayMin', document.getElementById('TrapCheckTimeDelayMinInput').value); window.localStorage.setItem('TrapCheckTimeDelayMax', document.getElementById('TrapCheckTimeDelayMaxInput').value);	if (document.getElementById('PlayKingRewardSoundInputTrue').checked == true) { window.localStorage.setItem('PlayKingRewardSound', 'true'); } else { window.localStorage.setItem('PlayKingRewardSound', 'false'); }	if (document.getElementById('KingRewardResumeInputTrue').checked == true) { window.localStorage.setItem('KingRewardResume', 'true'); } else { window.localStorage.setItem('KingRewardResume', 'false'); }	window.localStorage.setItem('KingRewardResumeTime', document.getElementById('KingRewardResumeTimeInput').value);	if (document.getElementById('PauseLocationInputTrue').checked == true) { window.localStorage.setItem('PauseLocation', 'true'); } else { window.localStorage.setItem('PauseLocation', 'false'); }	if (document.getElementById('autopopkrTrue').checked == true) { window.localStorage.setItem('autopopkr', 'true'); } else { window.localStorage.setItem('autopopkr', 'false'); }	";if(fbPlatform){if(secureConnection)C+="window.location.href='https://www.mousehuntgame.com/canvas/';\"/>";else C+="window.location.href='http://www.mousehuntgame.com/canvas/';\"/>"}else if(hiFivePlatform){if(secureConnection)C+="window.location.href='https://mousehunt.hi5.hitgrab.com/';\"/>";else C+="window.location.href='http://mousehunt.hi5.hitgrab.com/';\"/>"}else if(mhPlatform){if(secureConnection)C+="window.location.href='https://www.mousehuntgame.com/';\"/>";else C+="window.location.href='http://www.mousehuntgame.com/';\"/>"}C+="&nbsp;&nbsp;&nbsp;</td>";C+="</tr>";C+="</table>";var k=document.createElement("div");k.setAttribute("id","preferenceDiv");if(E==true)k.setAttribute("style","display: block");else k.setAttribute("style","display: none");k.innerHTML=C;n.appendChild(k);C=null;E=null;var L=document.createElement("hr");k.appendChild(L);L=null;k=null;t.parentNode.insertBefore(n,t);n=null}t=null}e=null}function loadPreferenceSettingFromStorage(){var e=getStorage("AggressiveMode");if(e==undefined||e==null){setStorage("AggressiveMode",aggressiveMode.toString())}else if(e==true||e.toLowerCase()=="true"){aggressiveMode=true}else{aggressiveMode=false}e=undefined;var t=getStorage("HornTimeDelayMin");var n=getStorage("HornTimeDelayMax");if(t==undefined||t==null||n==undefined||n==null){setStorage("HornTimeDelayMin",hornTimeDelayMin);setStorage("HornTimeDelayMax",hornTimeDelayMax)}else{hornTimeDelayMin=parseInt(t);hornTimeDelayMax=parseInt(n)}t=undefined;n=undefined;var r=getStorage("TrapCheck");if(r==undefined||r==null){setStorage("TrapCheck",enableTrapCheck.toString())}else if(r==true||r.toLowerCase()=="true"){enableTrapCheck=true}else{enableTrapCheck=false}r=undefined;var i=getStorage("TrapCheckTimeOffset");if(i==undefined||i==null){setStorage("TrapCheckTimeOffset",trapCheckTimeDiff)}else{trapCheckTimeDiff=parseInt(i)}i=undefined;var s=getStorage("TrapCheckTimeDelayMin");var o=getStorage("TrapCheckTimeDelayMax");if(s==undefined||s==null||o==undefined||o==null){setStorage("TrapCheckTimeDelayMin",checkTimeDelayMin);setStorage("TrapCheckTimeDelayMax",checkTimeDelayMax)}else{checkTimeDelayMin=parseInt(s);checkTimeDelayMax=parseInt(o)}s=undefined;o=undefined;var u=getStorage("PlayKingRewardSound");if(u==undefined||u==null){setStorage("PlayKingRewardSound",isKingWarningSound.toString())}else if(u==true||u.toLowerCase()=="true"){isKingWarningSound=true}else{isKingWarningSound=false}u=undefined;var a=getStorage("KingRewardResume");if(a==undefined||a==null){setStorage("KingRewardResume",reloadKingReward.toString())}else if(a==true||a.toLowerCase()=="true"){reloadKingReward=true}else{reloadKingReward=false}a=undefined;var f=getStorage("KingRewardResumeTime");if(f==undefined||f==null){setStorage("KingRewardResumeTime",kingPauseTimeMax)}else{kingPauseTimeMax=parseInt(f)}f=undefined;var l=getStorage("PauseLocation");if(l==undefined||l==null){setStorage("PauseLocation",pauseAtInvalidLocation.toString())}else if(l==true||l.toLowerCase()=="true"){pauseAtInvalidLocation=true}else{pauseAtInvalidLocation=false}l=undefined;var c=getStorage("autopopkr");if(c==undefined||c==null){setStorage("autopopkr",autopopkr.toString())}else if(c==true||c.toLowerCase()=="true"){autopopkr=true}else{autopopkr=false}c=undefined}function displayTimer(e,t,n){if(showTimerInTitle){document.title=e}if(showTimerInPage){nextHornTimeElement.innerHTML="<b>Next Hunter Horn Time:</b> "+t;checkTimeElement.innerHTML="<b>Next Trap Check Time:</b> "+n}e=null;t=null;n=null}function displayLocation(e){if(showTimerInPage&&pauseAtInvalidLocation){travelElement.innerHTML="<b>Hunt Location:</b> "+e}e=null}function displayKingRewardSumTime(e){if(showTimerInPage){if(e){lastKingRewardSumTimeElement.innerHTML="("+e+")"}else{lastKingRewardSumTimeElement.innerHTML=""}}e=null}function addGoogleAd(){var e=document.getElementById("autoBotAdDiv");if(e){e.parentNode.removeChild(e);e=null}var t;if(fbPlatform||hiFivePlatform||mhPlatform){t=document.getElementById("noscript")}else if(mhMobilePlatform){t=document.getElementById("mobileHorn")}if(t){var n=document.createElement("div");n.setAttribute("id","autoBotAdDiv");n.innerHTML='<script type="text/javascript"><!-- google_ad_client = "ca-pub-0646444153861496"; google_ad_slot = "5069542056"; google_ad_width = 728;google_ad_height = 90; //--> </script> <script type="text/javascript" src="http://pagead2.googlesyndication.com/pagead/show_ads.js"></script>';t.parentNode.insertBefore(n,t);timerDivElement=null}}function soundHorn(){displayTimer("Ready to Blow The Horn...","Ready to Blow The Horn...","Ready to Blow The Horn...");var e=document.getElementById("scriptNode");if(e){e.setAttribute("soundedHornAtt","false")}e=null;if(!aggressiveMode){var t=document.getElementById("header");if(t){var n=t.getAttribute("class");if(n.indexOf("hornready")!=-1){displayTimer("Blowing The Horn...","Blowing The Horn...","Blowing The Horn...");var r=document.getElementsByClassName("hornbutton")[0].firstChild;fireEvent(r,"click");r=null;t=null;n=null;window.setTimeout(function(){afterSoundingHorn()},5e3)}else if(n.indexOf("hornsounding")!=-1||n.indexOf("hornsounded")!=-1){displayTimer("Synchronizing Data...","Someone had just sound the horn. Synchronizing data...","Someone had just sound the horn. Synchronizing data...");t=null;n=null;window.setTimeout(function(){afterSoundingHorn()},5e3)}else if(n.indexOf("hornwaiting")!=-1){displayTimer("Synchronizing Data...","Hunter horn is not ready yet. Synchronizing data...","Hunter horn is not ready yet. Synchronizing data...");retrieveData();checkJournalDate();t=null;n=null;window.setTimeout(function(){countdownTimer()},timerRefreshInterval*1e3)}else{displayTimer("Synchronizing Data...","Hunter horn is missing. Synchronizing data...","Hunter horn is missing. Synchronizing data...");var r=document.getElementsByClassName("hornbutton")[0].firstChild;fireEvent(r,"click");r=null;t=null;n=null;window.setTimeout(function(){afterSoundingHorn()},5e3)}}else{t=null;reloadWithMessage("Fail to find the horn header. Reloading...",false)}}else{fireEvent(document.getElementsByClassName("hornbutton")[0].firstChild,"click");window.setTimeout(function(){afterSoundingHorn()},3e3)}}function afterSoundingHorn(){var e=document.getElementById("scriptNode");if(e){e.setAttribute("soundedHornAtt","false")}e=null;var t=document.getElementById("header");if(t){var n=t.getAttribute("class");if(n.indexOf("hornready")!=-1){displayTimer("Blowing The Horn Again...","Blowing The Horn Again...","Blowing The Horn Again...");var r=document.getElementsByClassName("hornbutton")[0].firstChild;fireEvent(r,"click");r=null;t=null;n=null;++hornRetry;if(hornRetry>hornRetryMax){reloadWithMessage("Detected script caught in loop. Reloading...",true);hornRetry=0}else{window.setTimeout(function(){afterSoundingHorn()},1e3)}}else if(n.indexOf("hornsounding")!=-1){displayTimer("The horn sounding taken extra longer than normal...","The horn sounding taken extra longer than normal...","The horn sounding taken extra longer than normal...");t=null;n=null;++hornRetry;if(hornRetry>hornRetryMax){reloadWithMessage("Detected script caught in loop. Reloading...",true);hornRetry=0}else{window.setTimeout(function(){afterSoundingHorn()},3e3)}}else{displayTimer("Horn sounded. Synchronizing Data...","Horn sounded. Synchronizing data...","Horn sounded. Synchronizing data...");retrieveData();t=null;n=null;window.setTimeout(function(){countdownTimer()},timerRefreshInterval*1e3);hornRetry=0}}}function embedScript(){var e=document.createElement("script");e.setAttribute("id","scriptNode");e.setAttribute("type","text/javascript");e.setAttribute("soundedHornAtt","false");e.innerHTML='														function soundedHorn()														{																			var scriptNode = document.getElementById("scriptNode");					if (scriptNode)															{																		scriptNode.setAttribute("soundedHornAtt", "true");					}																		scriptNode = null;														}																			';var t;if(fbPlatform||hiFivePlatform||mhPlatform){t=document.getElementById("noscript")}else if(mhMobilePlatform){t=document.getElementById("mobileHorn")}t.parentNode.insertBefore(e,t);e=null;t=null;var n=document.getElementsByClassName("hornbutton")[0].firstChild;var r=n.getAttribute("onclick").toString();var i=r.indexOf("return false;");var s=r.substring(0,i)+"soundedHorn();"+r.substring(i);n.setAttribute("onclick",s);n=null;r=null;i=null;s=null}function kingRewardAction(){displayTimer("King's Reward!","King's Reward","King's Reward!");displayLocation("-");playKingRewardSound();var e=document.getElementsByTagName("input");if(e){var t;for(t=0;t<e.length;++t){if(e[t].getAttribute("name")=="puzzle_answer"){e[t].focus();break}}t=null}e=null;var n=new Date;setStorage("lastKingRewardDate",n.toString());n=null;if(kingPauseTimeMax<=0){kingPauseTimeMax=1}kingPauseTime=kingPauseTimeMax;kingRewardCountdownTimer()}function notify(){if(!Notification){alert("Please us a modern version of Chrome, Firefox, Opera or Firefox.");return}if(Notification.permission!=="granted")Notification.requestPermission();var e=new Notification("KR NOW",{icon:"http://3.bp.blogspot.com/_O2yZIhpq9E8/TBoAMw0fMNI/AAAAAAAAAxo/1ytaIxQQz4o/s1600/Subliminal+Message.JPG",body:"Kings Reward NOW"});e.onclick=function(){window.open("https://www.mousehuntgame.com/");e.close()};e.onshow=function(){setTimeout(function(){e.close()},5e3)}}function playKingRewardSound(){notify();if(isKingWarningSound){var e=new Audio("https://raw.githubusercontent.com/nobodyrandom/mhAutobot/master/resource/horn.mp3");e.play();var t=document.getElementsByTagName("body");var n=document.createElement("button");n.setAttribute("id","stopAudio");n.setAttribute("style","position: fixed;");n.setAttribute("onclick","hornAudio.pause();");n.innerHTML="CLICK ME TO STOP THIS ANNOYING MUSIC";t[0].appendChild(n);t=null;n=null;snippet=null}if(autopopkr)alert("Kings Reward NOW")}function kingRewardCountdownTimer(){var e=new Date;var t=timeElapsed(lastDateRecorded,e);lastDateRecorded=null;lastDateRecorded=e;e=null;if(reloadKingReward){kingPauseTime-=t}if(lastKingRewardSumTime!=-1){lastKingRewardSumTime+=t}t=null;if(kingPauseTime<=0){displayTimer("King's Reward - Reloading...","Reloading...","Reloading...");var n=document.getElementsByClassName("campbutton")[0].firstChild;fireEvent(n,"click");n=null;window.setTimeout(function(){reloadWithMessage("Fail to click on camp button. Reloading...",false)},5e3)}else{if(reloadKingReward){displayTimer("King's Reward - Reload in "+timeformat(kingPauseTime),"Reloading in "+timeformat(kingPauseTime),"Reloading in "+timeformat(kingPauseTime))}displayKingRewardSumTime(timeFormatLong(lastKingRewardSumTime));if(!checkResumeButton()){window.setTimeout(function(){kingRewardCountdownTimer()},timerRefreshInterval*1e3)}}}function checkResumeButton(){var e=false;var t=document.getElementsByTagName("img");if(t){var n;for(n=0;n<t.length;++n){if(t[n].getAttribute("src").indexOf("resume_hunting_blue.gif")!=-1){var r=t[n].parentNode;fireEvent(r,"click");r=null;window.setTimeout(function(){reloadWithMessage("Fail to click on resume button. Reloading...",false)},6e3);window.setTimeout(function(){checkResumeButton()},1e4);e=true;break}}n=null}t=null;try{return e}finally{e=null}}function trapCheck(){displayTimer("Checking The Trap...","Checking trap now...","Checking trap now...");var e=document.getElementsByClassName("campbutton")[0].firstChild;fireEvent(e,"click");e=null;window.setTimeout(function(){reloadWithMessage("Fail to click on camp button. Reloading...",false)},5e3)}function browserDetection(){var e="unknown";var t=navigator.userAgent.toString().toLowerCase();if(t.indexOf("firefox")>=0){e="firefox"}else if(t.indexOf("opera")>=0){e="opera"}else if(t.indexOf("chrome")>=0){e="chrome"}t=null;try{return e}finally{e=null}}function setStorage(e,t){if("localStorage"in window&&window["localStorage"]!==null){window.localStorage.setItem(e,t)}e=undefined;t=undefined}function removeStorage(e){if("localStorage"in window&&window["localStorage"]!==null){window.localStorage.removeItem(e)}e=undefined}function getStorage(e){if("localStorage"in window&&window["localStorage"]!==null){return window.localStorage.getItem(e)}e=undefined}function getCookie(e){if(document.cookie.length>0){var t=document.cookie.indexOf(e+"=");if(t!=-1){t=t+e.length+1;var n=document.cookie.indexOf(";",t);if(n==-1){n=document.cookie.length}var r=unescape(document.cookie.substring(t,n));e=null;t=null;n=null;try{return r}finally{r=null}}t=null}e=null;return null}function fireEvent(e,t){if(document.createEventObject){var n=document.createEventObject();try{return e.fireEvent("on"+t,n)}finally{e=null;t=null;n=null}}else{var n=document.createEvent("HTMLEvents");n.initEvent(t,true,true);try{return!e.dispatchEvent(n)}finally{e=null;t=null;n=null}}}function getPageVariableForChrome(e){var t=document.createElement("script");t.setAttribute("id","scriptElement");t.setAttribute("type","text/javascript");t.innerHTML="document.getElementById('scriptElement').innerText="+e+";";document.body.appendChild(t);var n=t.innerHTML;document.body.removeChild(t);t=null;e=null;try{return n}finally{n=null}}function timeElapsed(e,t){var n=0;var r=Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds());var i=Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds());n=(i-r)/1e3;r=null;i=null;e=null;t=null;try{return n}finally{n=null}}function timeformat(e){var t;var n=Math.floor(e/3600);var r=Math.floor(e%3600/60);var i=e%3600%60%60;if(n>0){t=n.toString()+" hr "+r.toString()+" min "+i.toString()+" sec"}else if(r>0){t=r.toString()+" min "+i.toString()+" sec"}else{t=i.toString()+" sec"}e=null;n=null;r=null;i=null;try{return t}finally{t=null}}function timeFormatLong(e){var t;if(e!=-1){var n=Math.floor(e/86400);var r=Math.floor(e%86400/3600);var i=Math.floor(e%3600/60);if(n>0){t=n.toString()+" day "+r.toString()+" hr "+i.toString()+" min ago"}else if(r>0){t=r.toString()+" hr "+i.toString()+" min ago"}else if(i>0){t=i.toString()+" min ago"}n=null;r=null;i=null}else{t=null}e=null;try{return t}finally{t=null}}var hornTimeDelayMin=1;var hornTimeDelayMax=150;var aggressiveMode=false;var enableTrapCheck=false;var trapCheckTimeDiff=15;var checkTimeDelayMin=15;var checkTimeDelayMax=120;var isKingWarningSound=false;var reloadKingReward=false;var kingPauseTimeMax=18e3;var pauseAtInvalidLocation=true;var autopopkr=true;var showTimerInTitle=true;var showTimerInPage=true;var showLastPageLoadTime=true;var errorReloadTime=20;var timerRefreshInterval=1;var scriptVersion=GM_info.script.version;var fbPlatform=false;var hiFivePlatform=false;var mhPlatform=false;var mhMobilePlatform=false;var secureConnection=false;var lastDateRecorded=new Date;var hornTime=900;var hornTimeDelay=0;var checkTimeDelay=0;var isKingReward=false;var lastKingRewardSumTime;var kingPauseTime;var baitQuantity=-1;var huntLocation;var currentLocation;var today=new Date;var checkTime=today.getMinutes()>=trapCheckTimeDiff?3600+trapCheckTimeDiff*60-(today.getMinutes()*60+today.getSeconds()):trapCheckTimeDiff*60-(today.getMinutes()*60+today.getSeconds());today=undefined;var hornRetryMax=10;var hornRetry=0;var nextActiveTime=900;var timerInterval=2;var titleElement;var nextHornTimeElement;var checkTimeElement;var kingTimeElement;var lastKingRewardSumTimeElement;var optionElement;var travelElement;exeScript()